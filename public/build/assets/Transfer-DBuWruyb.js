import{r as S,B as C,c as v,G as B,a as h,o as m,w as _,b as e,d as l,u as r,l as N,e as w,f as E,g as b,m as y,v as k,t as o,F as A,h as D,n as L,p as T,i as M}from"./app-KUgWEtTK.js";import{W as j,U as R,D as V,_ as $}from"./DashboardLayout-CBd3-9Qr.js";import{c as q}from"./createLucideIcon-fdl4BT3X.js";import{C as f}from"./circle-check-big-C1-uGsP2.js";import{F as P}from"./file-text-CW7SMSPg.js";import{L as U}from"./loader-circle-COzy0sLb.js";import{R as I}from"./repeat-BY-m6Vze.js";import{C as W}from"./circle-alert-zp-rkyuY.js";import{C as Y}from"./circle-plus-B84xM5g1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./eye-CqiVPK0H.js";import"./menu-hSB8Arlo.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=q("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),O={class:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-purple-500/20"},H={class:"p-4 lg:p-8"},J={class:"max-w-4xl mx-auto"},Q={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},X={class:"lg:col-span-2"},Z={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20"},ee={class:"mb-6"},te={class:"block text-sm font-medium text-purple-300 mb-2"},se={class:"relative"},re={key:0,class:"mt-2 p-3 bg-green-500/10 border border-green-500/30 rounded-lg"},le={class:"flex items-center space-x-2"},ne={class:"text-green-300"},oe={class:"mb-6"},ae={class:"block text-sm font-medium text-purple-300 mb-2"},ie={class:"relative"},de=["min","max"],ue={class:"flex justify-between mt-2"},pe={class:"text-xs text-purple-400"},ce={class:"text-xs text-purple-400"},me={class:"grid grid-cols-3 gap-2 mt-3"},fe=["onClick"],xe={class:"mb-6"},be={class:"block text-sm font-medium text-purple-300 mb-2"},ge={class:"flex space-x-3"},ve=["disabled"],he={class:"lg:col-span-1"},_e={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20 mb-6"},we={class:"space-y-3"},ye={class:"flex justify-between items-center"},ke={class:"font-bold text-white"},Se={class:"flex justify-between items-center"},Ee={class:"font-bold text-red-400"},Te={class:"pt-3 border-t border-blue-500/20"},Fe={class:"flex justify-between items-center mb-2"},Ke={class:"font-bold text-white"},ze={class:"flex justify-between items-center"},Ce={class:"font-bold text-green-400"},Be={class:"flex justify-between items-center"},Ne={class:"font-bold text-white"},Ae={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20 mb-6"},De={class:"text-center"},Le={class:"text-3xl font-bold text-white mb-2"},Me={key:0,class:"bg-gradient-to-br from-red-900/30 to-red-800/30 backdrop-blur-xl border border-red-500/30 rounded-2xl p-6 shadow-2xl shadow-red-500/20"},je={class:"flex items-center space-x-3 mb-3"},Re={class:"text-red-300 mb-3"},Ve={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-yellow-500/30 rounded-2xl p-6 shadow-2xl shadow-yellow-500/20"},$e={class:"space-y-2 text-sm text-blue-200"},qe={class:"flex items-start space-x-2"},Pe={class:"flex items-start space-x-2"},Ue={class:"flex items-start space-x-2"},Ie={class:"flex items-start space-x-2"},lt={__name:"Transfer",props:{balance:{type:[Number,String],default:0},min_transfer:{type:Number,default:100},max_transfer:{type:Number,default:5e4},transfer_fee_percentage:{type:Number,default:.5}},setup(i){const u=i,p=S(!1),F=[100,500,1e3,2e3,5e3,1e4],x=S(null),s=C({recipient_email:"",amount:100,description:""}),g=v(()=>(parseFloat(s.amount)||0)*(u.transfer_fee_percentage/100)),c=v(()=>(parseFloat(s.amount)||0)+g.value),K=v(()=>parseFloat(u.balance)-c.value),n=a=>(parseFloat(a)||0).toLocaleString("en-KE",{minimumFractionDigits:0,maximumFractionDigits:0});B(()=>s.recipient_email,async a=>{a&&a.includes("@")?setTimeout(()=>{a.includes("@")&&(x.value={name:a.split("@")[0],email:a})},500):x.value=null});const z=async()=>{if(!s.recipient_email||!s.recipient_email.includes("@")){alert("Please enter a valid recipient email");return}if(!s.amount||s.amount<u.min_transfer||s.amount>u.max_transfer){alert(`Transfer amount must be between KES ${u.min_transfer.toLocaleString()} and KES ${u.max_transfer.toLocaleString()}`);return}if(c.value>parseFloat(u.balance)){alert("Insufficient balance for this transfer");return}const a=`Are you sure you want to transfer KES ${n(s.amount)} to ${s.recipient_email}? A fee of KES ${n(g.value)} will be charged.`;if(confirm(a)){p.value=!0;try{await M.post("/wallet/transfer",s,{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Transfer error:",t),alert("Failed to process transfer. Please check the form and try again."),p.value=!1}})}catch(t){console.error("Transfer error:",t),alert("An unexpected error occurred. Please try again."),p.value=!1}}};return(a,t)=>(m(),h($,{title:"Transfer Funds"},{default:_(()=>[e("div",O,[l(r(j),{size:16,class:"text-purple-400"}),t[3]||(t[3]=e("span",null,"Wallet",-1)),t[4]||(t[4]=e("span",{class:"text-purple-400"},"â€º",-1)),t[5]||(t[5]=e("span",{class:"text-purple-300"},"Transfer Funds",-1))]),e("div",H,[e("div",J,[t[27]||(t[27]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl lg:text-3xl font-bold text-white mb-2"},"Transfer Funds"),e("p",{class:"text-purple-300"},"Transfer money to other users on the platform")],-1)),e("div",Q,[e("div",X,[e("div",Z,[t[11]||(t[11]=e("h3",{class:"text-xl font-bold text-white mb-6"},"Transfer Form",-1)),e("form",{onSubmit:N(z,["prevent"])},[e("div",ee,[e("label",te,[l(r(R),{size:16,class:"inline mr-2"}),t[6]||(t[6]=b(" Recipient Email "))]),e("div",se,[l(r(G),{size:16,class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-purple-400"}),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>s.recipient_email=d),type:"email",required:"",class:"w-full bg-black/30 border border-purple-500/30 text-white rounded-xl pl-12 pr-4 py-3 focus:outline-none focus:border-purple-400",placeholder:"Enter recipient's email"},null,512),[[k,s.recipient_email]])]),x.value?(m(),w("div",re,[e("div",le,[l(r(f),{size:16,class:"text-green-400"}),e("span",ne,"Recipient found: "+o(x.value.name),1)])])):E("",!0)]),e("div",oe,[e("label",ae,[l(r(V),{size:16,class:"inline mr-2"}),t[7]||(t[7]=b(" Transfer Amount (KES) "))]),e("div",ie,[t[8]||(t[8]=e("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-purple-400"},"KES",-1)),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>s.amount=d),type:"number",min:i.min_transfer,max:Math.min(i.max_transfer,i.balance),required:"",class:"w-full bg-black/30 border border-purple-500/30 text-white rounded-xl pl-16 pr-4 py-3 focus:outline-none focus:border-purple-400",placeholder:"Enter amount"},null,8,de),[[k,s.amount]])]),e("div",ue,[e("span",pe,"Min: KES "+o(n(i.min_transfer)),1),e("span",ce,"Max: KES "+o(n(Math.min(i.max_transfer,i.balance))),1)]),e("div",me,[(m(),w(A,null,D(F,d=>e("button",{key:d,type:"button",onClick:We=>s.amount=d,class:L([s.amount===d?"bg-purple-600 text-white":"bg-black/30 text-purple-300","border border-purple-500/30 rounded-lg py-2 text-center text-sm transition-all duration-200"])}," KES "+o(n(d)),11,fe)),64))])]),e("div",xe,[e("label",be,[l(r(P),{size:16,class:"inline mr-2"}),t[9]||(t[9]=b(" Description (Optional) "))]),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>s.description=d),type:"text",class:"w-full bg-black/30 border border-purple-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-purple-400",placeholder:"What is this transfer for?"},null,512),[[k,s.description]])]),e("div",ge,[e("button",{type:"submit",disabled:p.value||c.value>i.balance,class:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2"},[p.value?(m(),h(r(U),{key:0,class:"animate-spin",size:20})):(m(),h(r(I),{key:1,size:20})),e("span",null,o(p.value?"Processing...":"Transfer Now"),1)],8,ve),l(r(T),{href:"/wallet",class:"flex-1 border border-purple-500/30 text-purple-400 hover:bg-purple-500/20 py-3 px-6 rounded-lg text-center transition-all duration-200"},{default:_(()=>t[10]||(t[10]=[b(" Cancel ")])),_:1})])],32)])]),e("div",he,[e("div",_e,[t[17]||(t[17]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Transfer Summary",-1)),e("div",we,[e("div",ye,[t[12]||(t[12]=e("span",{class:"text-sm text-blue-300"},"Transfer Amount",-1)),e("span",ke,"KES "+o(n(s.amount||0)),1)]),e("div",Se,[t[13]||(t[13]=e("span",{class:"text-sm text-blue-300"},"Transfer Fee (0.5%)",-1)),e("span",Ee,"- KES "+o(n(g.value)),1)]),e("div",Te,[e("div",Fe,[t[14]||(t[14]=e("span",{class:"text-sm text-blue-300"},"Total Deducted",-1)),e("span",Ke,"KES "+o(n(c.value)),1)]),e("div",ze,[t[15]||(t[15]=e("span",{class:"text-sm text-blue-300"},"Recipient Gets",-1)),e("span",Ce,"KES "+o(n(s.amount||0)),1)]),e("div",Be,[t[16]||(t[16]=e("span",{class:"text-sm text-blue-300"},"New Balance",-1)),e("span",Ne,"KES "+o(n(K.value)),1)])])])]),e("div",Ae,[t[19]||(t[19]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Current Balance",-1)),e("div",De,[e("div",Le,"KES "+o(n(i.balance)),1),t[18]||(t[18]=e("p",{class:"text-sm text-green-300"},"Available for transfer",-1))])]),c.value>i.balance?(m(),w("div",Me,[e("div",je,[l(r(W),{size:24,class:"text-red-400"}),t[20]||(t[20]=e("h3",{class:"text-lg font-bold text-white"},"Insufficient Balance",-1))]),e("p",Re," You need KES "+o(n(c.value))+" for this transfer. Your current balance is KES "+o(n(i.balance))+". ",1),l(r(T),{href:"/wallet/deposit",class:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200 inline-flex items-center space-x-2"},{default:_(()=>[l(r(Y),{size:16}),t[21]||(t[21]=e("span",null,"Deposit Funds",-1))]),_:1})])):E("",!0),e("div",Ve,[t[26]||(t[26]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Transfer Rules",-1)),e("ul",$e,[e("li",qe,[l(r(f),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[22]||(t[22]=e("span",null,"Transfers are instant and cannot be reversed",-1))]),e("li",Pe,[l(r(f),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[23]||(t[23]=e("span",null,"0.5% transfer fee applies to all transfers",-1))]),e("li",Ue,[l(r(f),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[24]||(t[24]=e("span",null,"You cannot transfer to yourself",-1))]),e("li",Ie,[l(r(f),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[25]||(t[25]=e("span",null,"Recipient must be a registered user",-1))])])])])])])])]),_:1}))}};export{lt as default};
