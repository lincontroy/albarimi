import{r as _,y as k,a as p,o as l,w as x,b as t,d,u as o,t as a,e as n,p as c,f as i,F as u,h,C as L,n as C}from"./app-CySw4lLa.js";import{C as b,T as A,D as v,_ as z}from"./DashboardLayout-BwZdqBzn.js";import{C as D}from"./circle-check-big-RJWez3ij.js";import{F as y}from"./file-plus-FMz0fjEF.js";import{L as M}from"./loader-circle-t5kkk-LA.js";import{C as S}from"./calculator-POYIGM6G.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-BJb2igB9.js";import"./eye-D21h4GYO.js";import"./menu-2oA-EL44.js";const F={class:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-purple-500/20"},T={class:"p-4 lg:p-8"},B={class:"max-w-7xl mx-auto"},N={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},$={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20"},j={class:"flex items-center space-x-3 mb-3"},P={class:"text-3xl font-bold text-white mb-2"},V={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20"},E={class:"flex items-center space-x-3 mb-3"},H={class:"text-3xl font-bold text-white mb-2"},K={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20"},O={class:"flex items-center space-x-3 mb-3"},R={class:"text-3xl font-bold text-white mb-2"},U={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-yellow-500/30 rounded-2xl p-6 shadow-2xl shadow-yellow-500/20"},G={class:"flex items-center space-x-3 mb-3"},Y={class:"text-3xl font-bold text-white mb-2"},q={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20 mb-8"},I={class:"flex items-center justify-between mb-6"},J={class:"flex items-center space-x-2"},Q={key:0,class:"text-center py-12"},W={key:1,class:"text-center py-12"},X={key:2,class:"overflow-x-auto"},Z={class:"w-full"},tt={class:"py-4 px-4"},et={class:"text-white font-bold mb-1"},st={class:"flex items-center space-x-2 mt-1"},lt={class:"text-xs text-blue-300"},ot={class:"text-xs text-blue-300"},at={key:0,class:"text-xs text-purple-300 mt-1"},dt={class:"py-4 px-4"},nt={key:0,class:"text-xs text-blue-300 mt-1"},rt={class:"py-4 px-4 text-blue-200 text-sm"},it={key:0,class:"text-green-300"},xt={key:1,class:"text-green-300"},ct={class:"py-4 px-4"},pt={class:"space-y-1"},ut={class:"text-sm font-bold text-white"},bt={class:"text-xs text-green-400"},mt={class:"text-xs text-blue-300"},ft={class:"py-4 px-4"},gt={class:"flex flex-col space-y-2"},ht={key:1,class:"text-xs text-yellow-400"},vt={key:0,class:"mt-6"},yt={class:"flex items-center justify-center space-x-2"},wt=["innerHTML"],_t={key:1,class:"bg-slate-800/30 text-slate-500 cursor-not-allowed px-4 py-2 rounded-lg"},kt=["innerHTML"],Nt={__name:"MyLoans",props:{loans:{type:Object,default:()=>({data:[],links:[]})},stats:{type:Object,default:()=>({})},userBalance:{type:[Number,String],default:0}},setup(r){const m=r,w=_(!1),f=g=>(parseFloat(g)||0).toLocaleString("en-KE",{minimumFractionDigits:0,maximumFractionDigits:0});return k(()=>{console.log("MyLoans component mounted"),console.log("Loans:",m.loans),console.log("Stats:",m.stats)}),(g,e)=>(l(),p(z,{title:"My Loans"},{default:x(()=>[t("div",F,[d(o(b),{size:16,class:"text-purple-400"}),e[0]||(e[0]=t("span",null,"Loans",-1)),e[1]||(e[1]=t("span",{class:"text-purple-400"},"›",-1)),e[2]||(e[2]=t("span",{class:"text-purple-300"},"My Loans",-1))]),t("div",T,[t("div",B,[e[21]||(e[21]=t("div",{class:"mb-8"},[t("h1",{class:"text-2xl lg:text-3xl font-bold text-white mb-2"},"My Loans"),t("p",{class:"text-purple-300"},"View and manage all your loan applications")],-1)),t("div",N,[t("div",$,[t("div",j,[d(o(b),{size:24,class:"text-purple-400"}),e[3]||(e[3]=t("h3",{class:"text-lg font-bold text-white"},"Total Loans",-1))]),t("p",P,a(r.stats.total||0),1),e[4]||(e[4]=t("p",{class:"text-sm text-purple-300"},"All loan applications",-1))]),t("div",V,[t("div",E,[d(o(A),{size:24,class:"text-blue-400"}),e[5]||(e[5]=t("h3",{class:"text-lg font-bold text-white"},"Active Loans",-1))]),t("p",H,a(r.stats.active||0),1),e[6]||(e[6]=t("p",{class:"text-sm text-blue-300"},"Currently active",-1))]),t("div",K,[t("div",O,[d(o(v),{size:24,class:"text-green-400"}),e[7]||(e[7]=t("h3",{class:"text-lg font-bold text-white"},"Total Borrowed",-1))]),t("p",R,"KES "+a(f(r.stats.total_borrowed||0)),1),e[8]||(e[8]=t("p",{class:"text-sm text-green-300"},"All time borrowing",-1))]),t("div",U,[t("div",G,[d(o(D),{size:24,class:"text-yellow-400"}),e[9]||(e[9]=t("h3",{class:"text-lg font-bold text-white"},"Total Repaid",-1))]),t("p",Y,"KES "+a(f(r.stats.total_repaid||0)),1),e[10]||(e[10]=t("p",{class:"text-sm text-yellow-300"},"Amount repaid",-1))])]),t("div",q,[t("div",I,[e[12]||(e[12]=t("h2",{class:"text-xl font-bold text-white"},"All Loan Applications",-1)),t("div",J,[d(o(c),{href:"/loans/apply",class:"text-green-400 hover:text-green-300 flex items-center space-x-1 text-sm"},{default:x(()=>[d(o(y),{size:16}),e[11]||(e[11]=t("span",null,"Apply for New Loan",-1))]),_:1})])]),w.value?(l(),n("div",Q,[d(o(M),{class:"animate-spin mx-auto text-blue-400",size:48}),e[13]||(e[13]=t("p",{class:"text-blue-300 mt-4"},"Loading loans...",-1))])):!r.loans.data||r.loans.data.length===0?(l(),n("div",W,[d(o(b),{size:48,class:"mx-auto text-blue-400 mb-3"}),e[15]||(e[15]=t("h4",{class:"text-lg font-bold text-white mb-2"},"No Loans Found",-1)),e[16]||(e[16]=t("p",{class:"text-blue-300 mb-4"},"You haven't applied for any loans yet",-1)),d(o(c),{href:"/loans/apply",class:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-2 px-6 rounded-lg transition-all duration-200 inline-flex items-center space-x-2"},{default:x(()=>[d(o(y),{size:16}),e[14]||(e[14]=t("span",null,"Apply for Loan",-1))]),_:1})])):(l(),n("div",X,[t("table",Z,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"border-b border-blue-500/20"},[t("th",{class:"text-left py-3 px-4 text-blue-300 font-semibold"},"Loan Details"),t("th",{class:"text-left py-3 px-4 text-blue-300 font-semibold"},"Status"),t("th",{class:"text-left py-3 px-4 text-blue-300 font-semibold"},"Dates"),t("th",{class:"text-left py-3 px-4 text-blue-300 font-semibold"},"Payment"),t("th",{class:"text-left py-3 px-4 text-blue-300 font-semibold"},"Actions")])],-1)),t("tbody",null,[(l(!0),n(u,null,h(r.loans.data,s=>(l(),n("tr",{key:s.id,class:"border-b border-blue-500/10 hover:bg-black/20 transition-colors"},[t("td",tt,[t("div",null,[t("div",et,a(s.amount),1),t("div",st,[t("span",lt,a(s.term_months)+" months",1),e[17]||(e[17]=t("span",{class:"text-xs text-blue-300"},"•",-1)),t("span",ot,a(s.interest_rate)+"% interest",1)]),s.purpose?(l(),n("div",at,a(s.purpose),1)):i("",!0)])]),t("td",dt,[t("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",style:L(`background-color: ${s.status_badge.bgColor}; color: ${s.status_badge.color}`)},a(s.status_badge.text),5),s.due_date?(l(),n("div",nt," Due: "+a(s.due_date),1)):i("",!0)]),t("td",rt,[t("div",null,"Applied: "+a(s.created_at),1),s.approved_at?(l(),n("div",it," Approved: "+a(s.approved_at),1)):i("",!0),s.disbursed_at?(l(),n("div",xt," Disbursed: "+a(s.disbursed_at),1)):i("",!0)]),t("td",ct,[t("div",pt,[t("div",ut,a(s.monthly_payment)+"/month",1),t("div",bt,"Paid: "+a(s.amount_paid),1),t("div",mt,"Balance: "+a(s.balance),1)])]),t("td",ft,[t("div",gt,[s.can_repay?(l(),p(o(c),{key:0,href:`/loans/${s.id}/repay`,class:"text-green-400 hover:text-green-300 text-sm flex items-center space-x-1"},{default:x(()=>[d(o(v),{size:14}),e[18]||(e[18]=t("span",null,"Make Payment",-1))]),_:2},1032,["href"])):i("",!0),d(o(c),{href:`/loans/calculator?amount=${parseFloat(s.amount.replace(/[^0-9.]/g,""))}&term=${s.term_months}`,class:"text-blue-400 hover:text-blue-300 text-sm flex items-center space-x-1"},{default:x(()=>[d(o(S),{size:14}),e[19]||(e[19]=t("span",null,"View Details",-1))]),_:2},1032,["href"]),s.status==="pending"?(l(),n("div",ht," Under review ")):i("",!0)])])]))),128))])]),r.loans.links&&r.loans.links.length>3?(l(),n("div",vt,[t("div",yt,[(l(!0),n(u,null,h(r.loans.links,s=>(l(),n(u,{key:s.label},[s.url?(l(),p(o(c),{key:0,href:s.url,class:C([{"bg-blue-600 text-white":s.active,"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50":!s.active},"px-4 py-2 rounded-lg transition-all duration-200"]),"preserve-scroll":""},{default:x(()=>[t("span",{innerHTML:s.label},null,8,wt)]),_:2},1032,["href","class"])):(l(),n("span",_t,[t("span",{innerHTML:s.label},null,8,kt)]))],64))),128))])])):i("",!0)]))]),e[22]||(e[22]=t("div",{class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20"},[t("h3",{class:"text-lg font-bold text-white mb-4"},"Loan Status Guide"),t("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},[t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-3 h-3 rounded-full bg-yellow-500"}),t("div",null,[t("h4",{class:"font-bold text-white text-sm"},"Pending"),t("p",{class:"text-xs text-blue-300"},"Application under review")])]),t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-3 h-3 rounded-full bg-green-500"}),t("div",null,[t("h4",{class:"font-bold text-white text-sm"},"Approved"),t("p",{class:"text-xs text-blue-300"},"Loan approved, awaiting disbursement")])]),t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-3 h-3 rounded-full bg-blue-500"}),t("div",null,[t("h4",{class:"font-bold text-white text-sm"},"Active"),t("p",{class:"text-xs text-blue-300"},"Loan active, repayments ongoing")])]),t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-3 h-3 rounded-full bg-red-500"}),t("div",null,[t("h4",{class:"font-bold text-white text-sm"},"Rejected"),t("p",{class:"text-xs text-blue-300"},"Application not approved")])]),t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-3 h-3 rounded-full bg-purple-500"}),t("div",null,[t("h4",{class:"font-bold text-white text-sm"},"Completed"),t("p",{class:"text-xs text-blue-300"},"Loan fully repaid")])]),t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-3 h-3 rounded-full bg-red-700"}),t("div",null,[t("h4",{class:"font-bold text-white text-sm"},"Defaulted"),t("p",{class:"text-xs text-blue-300"},"Loan payments overdue")])])])],-1))])])]),_:1}))}};export{Nt as default};
