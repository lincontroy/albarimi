import{r as p,a as k,o as a,w as C,b as e,d as n,u as r,e as i,f as g,t as l,m as L,g as T,F as v,h as f,D as E,n as S,l as M,p as F,i as A}from"./app-D6j1FQBi.js";import{X as G,W as O,_ as U}from"./DashboardLayout-BYlz_9qN.js";import{S as P}from"./shopping-cart-Czc1s95k.js";import{T as j}from"./tag-C7mfO9QF.js";import{G as K}from"./globe-Cw8tI9V8.js";import{L as N}from"./loader-circle-C7QWmB1k.js";import{c as $}from"./createLucideIcon-wmvZfjIg.js";import{C as W}from"./copy-8r4hKj84.js";import{C as R}from"./clock-DaPIkIh_.js";import{C as X}from"./calendar-HyBq2tTC.js";import{C as V}from"./circle-check-big-UPhiIdIb.js";import{A as q}from"./arrow-left-NjVa12eO.js";import"./eye-CBnRukzz.js";import"./menu-ByRzepzI.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=$("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=$("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Q={class:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-green-500/20"},Z={class:"p-4 lg:p-8"},ee={class:"max-w-7xl mx-auto"},te={class:"mb-8"},se={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20"},oe={class:"flex flex-col lg:flex-row items-center justify-between gap-4"},le={class:"text-2xl font-bold text-green-400"},ae={class:"text-center"},re={key:0,class:"mt-2"},ie={class:"text-sm text-white"},ne={class:"text-lg font-bold text-white"},de={class:"mb-8"},ce={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"block text-sm font-medium text-blue-300 mb-2"},be=["value"],me={class:"block text-sm font-medium text-blue-300 mb-2"},pe=["value"],ge={class:"mt-4"},ve={key:0,class:"text-center py-8"},fe={key:1,class:"text-center py-8 bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl"},he={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},ye=["onClick"],_e={key:0,class:"absolute top-4 right-4"},we={class:"bg-blue-500 text-white p-1 rounded-full"},ke={class:"mb-4"},Ce={class:"flex items-center justify-between mb-3"},Se={class:"flex items-center space-x-2"},Ve={class:"text-lg font-bold text-white"},ze={class:"mb-3"},Be={class:"text-xl font-bold text-white"},Le={class:"mb-3"},Te={class:"flex items-center justify-between bg-black/30 rounded-xl p-3"},Ee={class:"text-white font-mono text-sm"},Fe=["onClick"],Ae={class:"space-y-2 mb-4"},Pe={class:"flex items-center space-x-2"},je={class:"text-sm text-blue-300"},Ke={key:0,class:"flex items-center space-x-2"},Ne={class:"text-sm text-orange-300"},$e={class:"mb-4"},Ye={class:"space-y-1"},De={class:"text-green-100"},Ie={class:"flex items-center justify-between mb-4"},Me={class:"text-2xl font-bold text-green-400"},Ge={key:0,class:"text-right"},Oe={class:"text-sm font-semibold text-white"},Ue=["onClick"],We={key:3,class:"mb-8"},Re={class:"bg-gradient-to-br from-blue-600/40 to-cyan-600/40 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20"},Xe={class:"text-lg font-bold text-white mb-4 flex items-center space-x-2"},qe={class:"mb-6"},He={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Je={class:"bg-black/30 rounded-xl p-4"},Qe={class:"text-lg font-bold text-white"},Ze={class:"bg-black/30 rounded-xl p-4"},et={class:"text-lg font-bold text-white"},tt={class:"bg-black/30 rounded-xl p-4"},st={class:"text-lg font-bold text-white"},ot={class:"bg-black/30 rounded-xl p-4"},lt={class:"text-lg font-bold text-green-400"},at={class:"bg-black/30 rounded-xl p-4 mb-4"},rt={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},it={class:"text-green-100"},nt={class:"bg-black/30 rounded-xl p-4"},dt={class:"flex items-center justify-between"},ct={class:"text-xl font-bold text-purple-400"},ut={class:"text-right"},xt={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},bt={key:0,class:"text-red-400 text-sm"},mt={key:1,class:"text-green-400 text-sm"},pt=["disabled"],gt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vt={class:"flex items-center space-x-3"},ft={class:"flex items-center space-x-3"},At={__name:"Purchase",props:{availableCodes:Array,visaTypes:Object,countries:Object,selectedVisaType:String,selectedCountry:String,userBalance:Number},setup(c){const h=c,o=p(null),y=p(!1),_=p(!1),z=d=>{o.value=d},x=d=>o.value?.id===d,Y=async d=>{try{await navigator.clipboard.writeText(d),alert("Visa code copied to clipboard!")}catch(t){console.error("Failed to copy:",t),alert("Failed to copy to clipboard.")}},w=()=>{_.value=!0;const d={};b.value&&(d.visa_type=b.value),m.value&&(d.country=m.value),A.get("/visa-codes/purchase",d,{preserveState:!0,preserveScroll:!0,onFinish:()=>{_.value=!1,o.value=null}})},B=()=>{b.value="",m.value="",w()},D=async()=>{if(!o.value){alert("Please select a visa code to purchase.");return}if(h.userBalance<o.value.amount){alert(`Insufficient balance. You need KES ${(o.value.amount-h.userBalance).toLocaleString()} more.`);return}if(confirm(`Are you sure you want to purchase visa code ${o.value.code} for KES ${o.value.amount.toLocaleString()}?`)){y.value=!0;try{await A.post("/visa-codes/purchase",{visa_code_id:o.value.id},{preserveScroll:!0,onSuccess:d=>{const t=d?.props?.flash||{};t.success?alert(t.success):t.error&&alert(t.error)},onError:d=>{console.error("Error purchasing visa code:",d),alert("Failed to purchase visa code. Please try again.")}})}catch(d){console.error("Error purchasing visa code:",d),alert("An unexpected error occurred.")}finally{y.value=!1}}},b=p(h.selectedVisaType||""),m=p(h.selectedCountry||"");return(d,t)=>(a(),k(U,{title:"Purchase Visa Codes"},{default:C(()=>[e("div",Q,[n(r(P),{size:16,class:"text-green-400"}),t[2]||(t[2]=e("span",null,"Visa Codes",-1)),t[3]||(t[3]=e("span",{class:"text-green-400"},"›",-1)),t[4]||(t[4]=e("span",{class:"text-green-300"},"Purchase",-1))]),e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",oe,[e("div",null,[t[5]||(t[5]=e("h3",{class:"text-lg font-bold text-white mb-1"},"Your Balance",-1)),e("p",le,"KES "+l(c.userBalance.toLocaleString()),1)]),e("div",ae,[t[6]||(t[6]=e("p",{class:"text-green-300 text-sm mb-1"},"Available for purchase",-1)),o.value?(a(),i("div",re,[e("p",ie,"Selected: "+l(o.value.visa_name)+" - "+l(o.value.country_name),1),e("p",ne,"KES "+l(o.value.amount.toLocaleString()),1)])):g("",!0)])])])]),e("div",de,[e("div",ce,[t[12]||(t[12]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Filter Visa Codes",-1)),e("div",ue,[e("div",null,[e("label",xe,[n(r(j),{size:16,class:"inline mr-2"}),t[7]||(t[7]=T(" Visa Type "))]),L(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),onChange:w,class:"w-full bg-black/30 border border-blue-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-blue-400"},[t[8]||(t[8]=e("option",{value:""},"All Visa Types",-1)),(a(!0),i(v,null,f(c.visaTypes,(s,u)=>(a(),i("option",{key:u,value:u},l(s.name)+" - KES "+l(s.price.toLocaleString()),9,be))),128))],544),[[E,b.value]])]),e("div",null,[e("label",me,[n(r(K),{size:16,class:"inline mr-2"}),t[9]||(t[9]=T(" Country "))]),L(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),onChange:w,class:"w-full bg-black/30 border border-blue-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-blue-400"},[t[10]||(t[10]=e("option",{value:""},"All Countries",-1)),(a(!0),i(v,null,f(c.countries,(s,u)=>(a(),i("option",{key:u,value:u},l(s),9,pe))),128))],544),[[E,m.value]])])]),e("div",ge,[e("button",{onClick:B,class:"text-sm text-blue-400 hover:text-blue-300 flex items-center space-x-1"},[n(r(G),{size:14}),t[11]||(t[11]=e("span",null,"Clear Filters",-1))])])])]),_.value?(a(),i("div",ve,[n(r(N),{class:"animate-spin mx-auto text-green-400",size:32}),t[13]||(t[13]=e("p",{class:"text-green-300 mt-2"},"Loading visa codes...",-1))])):c.availableCodes.length===0?(a(),i("div",fe,[n(r(j),{size:48,class:"mx-auto text-green-400 mb-3"}),t[14]||(t[14]=e("h4",{class:"text-lg font-bold text-white mb-2"},"No Visa Codes Found",-1)),t[15]||(t[15]=e("p",{class:"text-green-300 mb-4"},"No visa codes match your filters. Try different criteria.",-1)),e("button",{onClick:B,class:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-2 px-6 rounded-xl transition-all duration-200"}," Clear Filters ")])):(a(),i("div",he,[(a(!0),i(v,null,f(c.availableCodes,s=>(a(),i("div",{key:s.id,class:S([{"border-green-500 shadow-green-500/20":!x(s.id),"border-blue-500 shadow-blue-500/40":x(s.id)},"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border rounded-2xl p-6 shadow-2xl transition-all duration-200 hover:border-blue-500 cursor-pointer"]),onClick:u=>z(s)},[x(s.id)?(a(),i("div",_e,[e("div",we,[n(r(H),{size:16})])])):g("",!0),e("div",ke,[e("div",Ce,[e("div",Se,[n(r(K),{size:20,class:"text-green-400"}),e("h4",Ve,l(s.country_name),1)]),t[16]||(t[16]=e("span",{class:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-xs font-semibold"}," Available ",-1))]),e("div",ze,[t[17]||(t[17]=e("p",{class:"text-sm opacity-75"},"Visa Type",-1)),e("p",Be,l(s.visa_name),1)]),e("div",Le,[t[18]||(t[18]=e("p",{class:"text-sm opacity-75 mb-1"},"Visa Code",-1)),e("div",Te,[e("code",Ee,l(s.code),1),e("button",{onClick:u=>Y(s.code),class:"text-blue-400 hover:text-blue-300"},[n(r(W),{size:16})],8,Fe)])]),e("div",Ae,[e("div",Pe,[n(r(R),{size:14,class:"text-blue-400"}),e("span",je,l(s.duration),1)]),s.days_remaining?(a(),i("div",Ke,[n(r(X),{size:14,class:"text-orange-400"}),e("span",Ne,"Expires in "+l(s.days_remaining)+" days",1)])):g("",!0)]),e("div",$e,[t[19]||(t[19]=e("p",{class:"text-sm opacity-75 mb-2"},"Features:",-1)),e("ul",Ye,[(a(!0),i(v,null,f(s.features.slice(0,3),(u,I)=>(a(),i("li",{key:I,class:"flex items-start space-x-2 text-sm"},[n(r(V),{size:14,class:"text-green-400 mt-0.5 flex-shrink-0"}),e("span",De,l(u),1)]))),128))])]),e("div",Ie,[e("div",null,[t[20]||(t[20]=e("p",{class:"text-sm opacity-75"},"Price",-1)),e("p",Me,"KES "+l(s.amount.toLocaleString()),1)]),s.days_remaining?(a(),i("div",Ge,[t[21]||(t[21]=e("p",{class:"text-sm opacity-75"},"Valid for",-1)),e("p",Oe,l(s.days_remaining)+" days",1)])):g("",!0)])]),e("button",{onClick:M(u=>z(s),["stop"]),class:S([{"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500":!x(s.id),"bg-gradient-to-r from-blue-600 to-cyan-600":x(s.id)},"w-full text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 shadow-lg flex items-center justify-center space-x-2"])},[n(r(P),{size:18}),e("span",null,l(x(s.id)?"Selected":"Select This Code"),1)],10,Ue)],10,ye))),128))])),o.value?(a(),i("div",We,[e("div",Re,[e("h3",Xe,[n(r(V),{size:20}),t[22]||(t[22]=e("span",null,"Complete Your Purchase",-1))]),e("div",qe,[e("div",He,[e("div",Je,[t[23]||(t[23]=e("p",{class:"text-sm opacity-75 mb-1"},"Selected Visa Code",-1)),e("p",Qe,l(o.value.code),1)]),e("div",Ze,[t[24]||(t[24]=e("p",{class:"text-sm opacity-75 mb-1"},"Visa Type",-1)),e("p",et,l(o.value.visa_name),1)]),e("div",tt,[t[25]||(t[25]=e("p",{class:"text-sm opacity-75 mb-1"},"Country",-1)),e("p",st,l(o.value.country_name),1)]),e("div",ot,[t[26]||(t[26]=e("p",{class:"text-sm opacity-75 mb-1"},"Price",-1)),e("p",lt,"KES "+l(o.value.amount.toLocaleString()),1)])]),e("div",at,[t[27]||(t[27]=e("p",{class:"text-sm opacity-75 mb-2"},"Features Included:",-1)),e("ul",rt,[(a(!0),i(v,null,f(o.value.features,(s,u)=>(a(),i("li",{key:u,class:"flex items-start space-x-2 text-sm"},[n(r(V),{size:14,class:"text-green-400 mt-0.5 flex-shrink-0"}),e("span",it,l(s),1)]))),128))])]),e("div",nt,[e("div",dt,[e("div",null,[t[28]||(t[28]=e("p",{class:"text-sm opacity-75"},"Your Balance",-1)),e("p",ct,"KES "+l(c.userBalance.toLocaleString()),1)]),e("div",ut,[t[29]||(t[29]=e("p",{class:"text-sm opacity-75"},"Remaining After Purchase",-1)),e("p",{class:S(["text-xl font-bold",{"text-green-400":c.userBalance>=o.value.amount,"text-red-400":c.userBalance<o.value.amount}])}," KES "+l((c.userBalance-o.value.amount).toLocaleString()),3)])])])]),e("div",xt,[e("div",null,[c.userBalance<o.value.amount?(a(),i("p",bt," ❌ Insufficient balance. You need KES "+l((o.value.amount-c.userBalance).toLocaleString())+" more. ",1)):(a(),i("p",mt," ✅ Sufficient balance available for purchase. "))]),e("button",{onClick:D,disabled:y.value||c.userBalance<o.value.amount,class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-8 rounded-xl transition-all duration-200 shadow-lg shadow-blue-500/50 flex items-center justify-center space-x-2"},[y.value?(a(),k(r(N),{key:0,size:20,class:"animate-spin"})):(a(),k(r(J),{key:1,size:18})),t[30]||(t[30]=e("span",null,"Purchase Visa Code",-1))],8,pt)])])])):g("",!0),e("div",gt,[n(r(F),{href:"/visa-codes",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20 hover:border-blue-500 transition-all duration-200 group"},{default:C(()=>[e("div",vt,[n(r(q),{size:24,class:"text-blue-400 group-hover:text-blue-300"}),t[31]||(t[31]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-blue-300"},"Back to Visa Codes"),e("p",{class:"text-blue-400 text-sm"},"Browse all available visa codes")],-1))])]),_:1}),n(r(F),{href:"/wallet/deposit",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20 hover:border-green-500 transition-all duration-200 group"},{default:C(()=>[e("div",ft,[n(r(O),{size:24,class:"text-green-400 group-hover:text-green-300"}),t[32]||(t[32]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-green-300"},"Deposit Funds"),e("p",{class:"text-green-400 text-sm"},"Add funds to your wallet")],-1))])]),_:1})])])])]),_:1}))}};export{At as default};
