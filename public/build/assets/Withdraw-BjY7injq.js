import{r as P,A,c as y,a as h,o as d,w as v,b as e,d as n,u as o,l as M,g as x,m as w,v as p,t as a,e as f,F as _,h as k,n as S,x as D,f as C,p as E,i as V}from"./app-D6j1FQBi.js";import{W as j,D as K,C as X,_ as $}from"./DashboardLayout-BYlz_9qN.js";import{P as q}from"./phone-DnqbI2_K.js";import{B as L}from"./building-D9boiQKA.js";import{C as g}from"./circle-check-big-UPhiIdIb.js";import{C as T}from"./clock-DaPIkIh_.js";import{L as U}from"./loader-circle-C7QWmB1k.js";import{C as Y}from"./circle-alert-BKND_jVk.js";import{C as I}from"./circle-plus-Doq2WsTG.js";import"./createLucideIcon-wmvZfjIg.js";import"./eye-CBnRukzz.js";import"./menu-ByRzepzI.js";const R={class:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-blue-500/20"},G={class:"p-4 lg:p-8"},H={class:"max-w-4xl mx-auto"},J={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},O={class:"lg:col-span-2"},Q={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20"},Z={class:"mb-6"},ee={class:"block text-sm font-medium text-blue-300 mb-2"},te={class:"relative"},se=["min","max"],le={class:"flex justify-between mt-2"},oe={class:"text-xs text-blue-400"},ae={class:"text-xs text-blue-400"},re={class:"grid grid-cols-3 gap-2 mt-3"},ne=["onClick"],ie={class:"mb-6"},de={class:"block text-sm font-medium text-blue-300 mb-2"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},be=["onClick"],me={class:"font-bold"},ce={class:"mb-6"},xe={key:0,class:"space-y-4"},we={class:"p-3 bg-green-500/10 border border-green-500/30 rounded-lg text-sm text-green-300"},pe={key:1,class:"space-y-4"},fe={class:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-sm text-yellow-300"},he={class:"flex space-x-3"},ge=["disabled"],ve={class:"lg:col-span-1"},ye={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20 mb-6"},_e={class:"space-y-3"},ke={class:"flex justify-between items-center"},Se={class:"font-bold text-white"},Ce={class:"flex justify-between items-center"},Ee={class:"font-bold text-red-400"},Ke={class:"pt-3 border-t border-green-500/20"},We={class:"flex justify-between items-center mb-2"},Fe={class:"font-bold text-white"},Be={class:"flex justify-between items-center"},ze={class:"font-bold text-green-400"},Ne={class:"flex justify-between items-center"},Pe={class:"font-bold text-white"},Ae={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20 mb-6"},Me={class:"text-center"},De={class:"text-3xl font-bold text-white mb-2"},Ve={key:0,class:"bg-gradient-to-br from-red-900/30 to-red-800/30 backdrop-blur-xl border border-red-500/30 rounded-2xl p-6 shadow-2xl shadow-red-500/20"},je={class:"flex items-center space-x-3 mb-3"},Xe={class:"text-red-300 mb-3"},$e={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-yellow-500/30 rounded-2xl p-6 shadow-2xl shadow-yellow-500/20"},qe={class:"space-y-2 text-sm text-blue-200"},Le={class:"flex items-start space-x-2"},Te={class:"flex items-start space-x-2"},Ue={class:"flex items-start space-x-2"},lt={__name:"Withdraw",props:{balance:{type:[Number,String],default:0},min_withdrawal:{type:Number,default:500},max_withdrawal:{type:Number,default:5e4},withdrawal_fee:{type:Number,default:50}},setup(r){const u=r,b=P(!1),W=[500,1e3,2e3,5e3,1e4,2e4],F=[{id:"mpesa",name:"M-Pesa",icon:q},{id:"bank",name:"Bank Transfer",icon:L}],s=A({amount:1e3,withdrawal_method:"mpesa",phone_number:"",bank_name:"",account_number:"",account_name:""}),m=y(()=>(parseFloat(s.amount)||0)+u.withdrawal_fee),B=y(()=>parseFloat(u.balance)-m.value),i=c=>(parseFloat(c)||0).toLocaleString("en-KE",{minimumFractionDigits:0,maximumFractionDigits:0}),z=async()=>{if(!s.amount||s.amount<u.min_withdrawal||s.amount>u.max_withdrawal){alert(`Withdrawal amount must be between KES ${u.min_withdrawal.toLocaleString()} and KES ${u.max_withdrawal.toLocaleString()}`);return}if(!s.withdrawal_method){alert("Please select a withdrawal method");return}if(m.value>parseFloat(u.balance)){alert("Insufficient balance for this withdrawal");return}const c=`Are you sure you want to withdraw KES ${i(s.amount)} via ${s.withdrawal_method.toUpperCase()}? A fee of KES ${u.withdrawal_fee} will be charged.`;if(confirm(c)){b.value=!0;try{await V.post("/wallet/withdraw",s,{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Withdrawal error:",t),alert("Failed to process withdrawal. Please check the form and try again."),b.value=!1}})}catch(t){console.error("Withdrawal error:",t),alert("An unexpected error occurred. Please try again."),b.value=!1}}};return(c,t)=>(d(),h($,{title:"Withdraw Funds"},{default:v(()=>[e("div",R,[n(o(j),{size:16,class:"text-blue-400"}),t[5]||(t[5]=e("span",null,"Wallet",-1)),t[6]||(t[6]=e("span",{class:"text-blue-400"},"â€º",-1)),t[7]||(t[7]=e("span",{class:"text-blue-300"},"Withdraw Funds",-1))]),e("div",G,[e("div",H,[t[33]||(t[33]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl lg:text-3xl font-bold text-white mb-2"},"Withdraw Funds"),e("p",{class:"text-blue-300"},"Withdraw funds from your wallet to your preferred account")],-1)),e("div",J,[e("div",O,[e("div",Q,[t[18]||(t[18]=e("h3",{class:"text-xl font-bold text-white mb-6"},"Withdrawal Form",-1)),e("form",{onSubmit:M(z,["prevent"])},[e("div",Z,[e("label",ee,[n(o(K),{size:16,class:"inline mr-2"}),t[8]||(t[8]=x(" Withdrawal Amount (KES) "))]),e("div",te,[t[9]||(t[9]=e("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-blue-400"},"KES",-1)),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.amount=l),type:"number",min:r.min_withdrawal,max:Math.min(r.max_withdrawal,r.balance),required:"",class:"w-full bg-black/30 border border-blue-500/30 text-white rounded-xl pl-16 pr-4 py-3 focus:outline-none focus:border-blue-400",placeholder:"Enter amount"},null,8,se),[[p,s.amount]])]),e("div",le,[e("span",oe,"Min: KES "+a(i(r.min_withdrawal)),1),e("span",ae,"Max: KES "+a(i(Math.min(r.max_withdrawal,r.balance))),1)]),e("div",re,[(d(),f(_,null,k(W,l=>e("button",{key:l,type:"button",onClick:N=>s.amount=l,class:S([s.amount===l?"bg-blue-600 text-white":"bg-black/30 text-blue-300","border border-blue-500/30 rounded-lg py-2 text-center text-sm transition-all duration-200"])}," KES "+a(i(l)),11,ne)),64))])]),e("div",ie,[e("label",de,[n(o(X),{size:16,class:"inline mr-2"}),t[10]||(t[10]=x(" Withdrawal Method "))]),e("div",ue,[(d(),f(_,null,k(F,l=>e("button",{key:l.id,type:"button",onClick:N=>s.withdrawal_method=l.id,class:S([s.withdrawal_method===l.id?"bg-blue-600 text-white border-blue-500":"bg-black/30 text-blue-300 border-blue-500/30","border rounded-lg p-4 text-center transition-all duration-200"])},[(d(),h(D(l.icon),{size:24,class:"mx-auto mb-2"})),e("div",me,a(l.name),1)],10,be)),64))])]),e("div",ce,[s.withdrawal_method==="mpesa"?(d(),f("div",xe,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-blue-300 mb-2"}," M-Pesa Phone Number ",-1)),w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.phone_number=l),type:"tel",required:"",class:"w-full bg-black/30 border border-blue-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-blue-400",placeholder:"07XXXXXXXX"},null,512),[[p,s.phone_number]])]),e("div",we,[n(o(g),{size:16,class:"inline mr-1"}),t[12]||(t[12]=x(" Funds will be sent to this M-Pesa number within 5-10 minutes "))])])):s.withdrawal_method==="bank"?(d(),f("div",pe,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-blue-300 mb-2"}," Bank Name ",-1)),w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.bank_name=l),type:"text",required:"",class:"w-full bg-black/30 border border-blue-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-blue-400",placeholder:"Enter bank name"},null,512),[[p,s.bank_name]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-blue-300 mb-2"}," Account Number ",-1)),w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.account_number=l),type:"text",required:"",class:"w-full bg-black/30 border border-blue-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-blue-400",placeholder:"Enter account number"},null,512),[[p,s.account_number]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-blue-300 mb-2"}," Account Name ",-1)),w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.account_name=l),type:"text",required:"",class:"w-full bg-black/30 border border-blue-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-blue-400",placeholder:"Enter account name"},null,512),[[p,s.account_name]])]),e("div",fe,[n(o(T),{size:16,class:"inline mr-1"}),t[16]||(t[16]=x(" Bank transfers may take 1-2 business days to process "))])])):C("",!0)]),e("div",he,[e("button",{type:"submit",disabled:b.value||!s.withdrawal_method||m.value>r.balance,class:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2"},[b.value?(d(),h(o(U),{key:0,class:"animate-spin",size:20})):(d(),h(o(K),{key:1,size:20})),e("span",null,a(b.value?"Processing...":"Withdraw Now"),1)],8,ge),n(o(E),{href:"/wallet",class:"flex-1 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20 py-3 px-6 rounded-lg text-center transition-all duration-200"},{default:v(()=>t[17]||(t[17]=[x(" Cancel ")])),_:1})])],32)])]),e("div",ve,[e("div",ye,[t[24]||(t[24]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Withdrawal Summary",-1)),e("div",_e,[e("div",ke,[t[19]||(t[19]=e("span",{class:"text-sm text-green-300"},"Withdrawal Amount",-1)),e("span",Se,"KES "+a(i(s.amount||0)),1)]),e("div",Ce,[t[20]||(t[20]=e("span",{class:"text-sm text-green-300"},"Processing Fee",-1)),e("span",Ee,"- KES "+a(r.withdrawal_fee),1)]),e("div",Ke,[e("div",We,[t[21]||(t[21]=e("span",{class:"text-sm text-green-300"},"Total Deducted",-1)),e("span",Fe,"KES "+a(i(m.value)),1)]),e("div",Be,[t[22]||(t[22]=e("span",{class:"text-sm text-green-300"},"You Receive",-1)),e("span",ze,"KES "+a(i(s.amount||0)),1)]),e("div",Ne,[t[23]||(t[23]=e("span",{class:"text-sm text-green-300"},"New Balance",-1)),e("span",Pe,"KES "+a(i(B.value)),1)])])])]),e("div",Ae,[t[26]||(t[26]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Current Balance",-1)),e("div",Me,[e("div",De,"KES "+a(i(r.balance)),1),t[25]||(t[25]=e("p",{class:"text-sm text-purple-300"},"Available for withdrawal",-1))])]),m.value>r.balance?(d(),f("div",Ve,[e("div",je,[n(o(Y),{size:24,class:"text-red-400"}),t[27]||(t[27]=e("h3",{class:"text-lg font-bold text-white"},"Insufficient Balance",-1))]),e("p",Xe," You need KES "+a(i(m.value))+" for this withdrawal. Your current balance is KES "+a(i(r.balance))+". ",1),n(o(E),{href:"/wallet/deposit",class:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200 inline-flex items-center space-x-2"},{default:v(()=>[n(o(I),{size:16}),t[28]||(t[28]=e("span",null,"Deposit Funds",-1))]),_:1})])):C("",!0),e("div",$e,[t[32]||(t[32]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Processing Time",-1)),e("ul",qe,[e("li",Le,[n(o(g),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[29]||(t[29]=e("span",null,"M-Pesa: 5-10 minutes",-1))]),e("li",Te,[n(o(g),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[30]||(t[30]=e("span",null,"Bank Transfer: 1-2 business days",-1))]),e("li",Ue,[n(o(g),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[31]||(t[31]=e("span",null,"All withdrawals subject to KES 50 fee",-1))])])])])])])])]),_:1}))}};export{lt as default};
