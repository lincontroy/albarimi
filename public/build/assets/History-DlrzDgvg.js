import{r as f,c as w,a as y,o as n,w as i,b as e,d as r,u as l,e as d,f as T,t as a,m as g,v as k,E as B,p,F as C,h as S,D as E,n as H}from"./app-B44wr4c_.js";import{C as h,D as M,W as A,_ as N}from"./DashboardLayout-C2D5VWEJ.js";import{H as z}from"./history-wG2eLW_O.js";import{C as F}from"./circle-check-big-D6jT3KiE.js";import{C as K}from"./clock-CesnpANf.js";import{S as j}from"./search-CzX43LQ4.js";import{L as I}from"./loader-circle-JNCLJVDx.js";import{S as V}from"./shopping-cart-CM6ZQ53U.js";import{E as U}from"./eye-By03grgf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-CNz6d2hL.js";import"./menu-BwH3VRfh.js";const W={class:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-purple-500/20"},O={class:"p-4 lg:p-8"},Y={class:"max-w-7xl mx-auto"},q={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},G={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-4 shadow-2xl shadow-blue-500/20"},J={class:"flex items-center space-x-2 mb-2"},Q={class:"text-2xl font-bold text-white"},R={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-4 shadow-2xl shadow-green-500/20"},X={class:"flex items-center space-x-2 mb-2"},Z={class:"text-2xl font-bold text-white"},ee={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-yellow-500/30 rounded-2xl p-4 shadow-2xl shadow-yellow-500/20"},te={class:"flex items-center space-x-2 mb-2"},se={class:"text-2xl font-bold text-white"},oe={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-4 shadow-2xl shadow-purple-500/20"},le={class:"flex items-center space-x-2 mb-2"},re={class:"text-2xl font-bold text-white"},ae={class:"mb-6"},ne={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-4 shadow-2xl shadow-purple-500/20"},de={class:"flex flex-col md:flex-row items-center justify-between gap-4"},ie={class:"flex-1 w-full"},pe={class:"relative"},ce={class:"flex items-center space-x-2"},ue={key:0,class:"text-center py-8"},xe={key:1,class:"text-center py-8 bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl"},be={key:2,class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl shadow-2xl shadow-purple-500/20 overflow-hidden"},me={class:"overflow-x-auto"},fe={class:"w-full"},ge={class:"p-4"},he={class:"flex items-center space-x-2"},ve={class:"text-white font-mono text-sm"},_e={class:"p-4"},we={class:"text-white font-semibold"},ye={class:"text-sm text-blue-300"},ke={class:"p-4"},Ce={class:"text-lg font-bold text-green-400"},Se={class:"text-sm text-green-300"},ze={class:"p-4"},Ve={class:"p-4"},$e={class:"text-white"},De={class:"p-4"},Le=["onClick"],Pe={key:3,class:"mt-8"},Te={class:"flex items-center justify-center space-x-2"},Be=["innerHTML"],Ee={class:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4"},He={class:"flex items-center space-x-3"},Me={class:"flex items-center space-x-3"},Ae={class:"flex items-center space-x-3"},Re={__name:"History",props:{purchases:Object},setup(c){const v=c,u=f(""),x=f(""),b=f(""),$=f(!1),m=w(()=>{const o=v.purchases.data;return{total:o.length,completed:o.filter(t=>t.status==="completed").length,pending:o.filter(t=>t.status==="pending").length,totalSpent:o.reduce((t,s)=>t+s.amount,0)}}),_=w(()=>v.purchases.data.filter(o=>{if(u.value){const t=u.value.toLowerCase();if(!o.transaction_id.toLowerCase().includes(t)&&!o.visa_code.toLowerCase().includes(t))return!1}return!(x.value&&o.status!==x.value||b.value&&new Date(o.created_at).toISOString().split("T")[0]!==b.value)})),D=o=>({completed:"rgba(34, 197, 94, 0.2)",pending:"rgba(250, 204, 21, 0.2)",failed:"rgba(239, 68, 68, 0.2)",cancelled:"rgba(100, 116, 139, 0.2)"})[o]||"rgba(100, 116, 139, 0.2)",L=o=>({completed:"#4ade80",pending:"#fbbf24",failed:"#f87171",cancelled:"#94a3b8"})[o]||"#94a3b8",P=o=>{const t=o.payment_details||{};alert(`Transaction Details:

Transaction ID: ${o.transaction_id}
Visa Code: ${o.visa_code}
Visa Type: ${o.visa_type}
Country: ${o.country}
Amount: KES ${o.amount.toLocaleString()}
Payment Method: ${o.payment_method}
Status: ${o.status}
Date: ${o.created_at}

Payment Details:
Balance Before: ${t.balance_before?`KES ${t.balance_before.toLocaleString()}`:"N/A"}
Balance After: ${t.balance_after?`KES ${t.balance_after.toLocaleString()}`:"N/A"}`)};return(o,t)=>(n(),y(N,{title:"Visa Code History"},{default:i(()=>[e("div",W,[r(l(z),{size:16,class:"text-purple-400"}),t[3]||(t[3]=e("span",null,"Visa Codes",-1)),t[4]||(t[4]=e("span",{class:"text-purple-400"},"›",-1)),t[5]||(t[5]=e("span",{class:"text-purple-300"},"Purchase History",-1))]),e("div",O,[e("div",Y,[t[20]||(t[20]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl lg:text-3xl font-bold text-white mb-2"},"Purchase History"),e("p",{class:"text-purple-300"},"View all your visa code transactions")],-1)),e("div",q,[e("div",G,[e("div",J,[r(l(h),{size:20,class:"text-blue-400"}),t[6]||(t[6]=e("p",{class:"text-sm text-blue-300"},"Total Purchases",-1))]),e("p",Q,a(m.value.total),1)]),e("div",R,[e("div",X,[r(l(F),{size:20,class:"text-green-400"}),t[7]||(t[7]=e("p",{class:"text-sm text-green-300"},"Completed",-1))]),e("p",Z,a(m.value.completed),1)]),e("div",ee,[e("div",te,[r(l(K),{size:20,class:"text-yellow-400"}),t[8]||(t[8]=e("p",{class:"text-sm text-yellow-300"},"Pending",-1))]),e("p",se,a(m.value.pending),1)]),e("div",oe,[e("div",le,[r(l(M),{size:20,class:"text-purple-400"}),t[9]||(t[9]=e("p",{class:"text-sm text-purple-300"},"Total Spent",-1))]),e("p",re,"KES "+a(m.value.totalSpent.toLocaleString()),1)])]),e("div",ae,[e("div",ne,[e("div",de,[e("div",ie,[e("div",pe,[r(l(j),{size:18,class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-purple-400"}),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),placeholder:"Search transactions...",class:"w-full bg-black/30 border border-purple-500/30 text-white rounded-xl pl-10 pr-4 py-2 focus:outline-none focus:border-purple-400"},null,512),[[k,u.value]])])]),e("div",ce,[g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),class:"bg-black/30 border border-purple-500/30 text-white rounded-xl px-3 py-2 focus:outline-none focus:border-purple-400"},t[10]||(t[10]=[e("option",{value:""},"All Status",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"failed"},"Failed",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),512),[[B,x.value]]),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>b.value=s),type:"date",class:"bg-black/30 border border-purple-500/30 text-white rounded-xl px-3 py-2 focus:outline-none focus:border-purple-400"},null,512),[[k,b.value]])])])])]),$.value?(n(),d("div",ue,[r(l(I),{class:"animate-spin mx-auto text-purple-400",size:32}),t[11]||(t[11]=e("p",{class:"text-purple-300 mt-2"},"Loading transaction history...",-1))])):_.value.length===0?(n(),d("div",xe,[r(l(z),{size:48,class:"mx-auto text-purple-400 mb-3"}),t[13]||(t[13]=e("h4",{class:"text-lg font-bold text-white mb-2"},"No Purchase History",-1)),t[14]||(t[14]=e("p",{class:"text-purple-300 mb-4"},"You haven't made any visa code purchases yet.",-1)),r(l(p),{href:"/visa-codes/purchase",class:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-2 px-6 rounded-xl transition-all duration-200 inline-flex items-center space-x-2"},{default:i(()=>[r(l(V),{size:16}),t[12]||(t[12]=e("span",null,"Purchase Visa Codes",-1))]),_:1})])):(n(),d("div",be,[e("div",me,[e("table",fe,[t[16]||(t[16]=e("thead",null,[e("tr",{class:"bg-black/30"},[e("th",{class:"text-left p-4 text-purple-300 font-semibold"},"Transaction ID"),e("th",{class:"text-left p-4 text-purple-300 font-semibold"},"Visa Code"),e("th",{class:"text-left p-4 text-purple-300 font-semibold"},"Amount"),e("th",{class:"text-left p-4 text-purple-300 font-semibold"},"Status"),e("th",{class:"text-left p-4 text-purple-300 font-semibold"},"Date"),e("th",{class:"text-left p-4 text-purple-300 font-semibold"},"Actions")])],-1)),e("tbody",null,[(n(!0),d(C,null,S(_.value,s=>(n(),d("tr",{key:s.id,class:"border-b border-purple-500/10 hover:bg-black/20 transition-colors duration-200"},[e("td",ge,[e("div",he,[r(l(h),{size:16,class:"text-blue-400"}),e("code",ve,a(s.transaction_id),1)])]),e("td",_e,[e("div",null,[e("p",we,a(s.visa_code),1),e("p",ye,a(s.visa_type)+" • "+a(s.country),1)])]),e("td",ke,[e("p",Ce,"KES "+a(s.amount.toLocaleString()),1),e("p",Se,a(s.payment_method),1)]),e("td",ze,[e("span",{class:"px-3 py-1 rounded-full text-xs font-semibold",style:E(`background-color: ${D(s.status)}; color: ${L(s.status)}`)},a(s.status),5)]),e("td",Ve,[e("p",$e,a(s.created_at),1)]),e("td",De,[e("button",{onClick:Ne=>P(s),class:"text-purple-400 hover:text-purple-300 flex items-center space-x-1"},[r(l(U),{size:16}),t[15]||(t[15]=e("span",{class:"text-sm"},"View",-1))],8,Le)])]))),128))])])])])),c.purchases.links&&c.purchases.links.length>3?(n(),d("div",Pe,[e("div",Te,[(n(!0),d(C,null,S(c.purchases.links,s=>(n(),y(l(p),{key:s.label,href:s.url,class:H([{"bg-purple-600 text-white":s.active,"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50":!s.active&&s.url,"bg-slate-800/30 text-slate-500 cursor-not-allowed":!s.url},"px-4 py-2 rounded-lg transition-all duration-200"]),"preserve-scroll":""},{default:i(()=>[e("span",{innerHTML:s.label},null,8,Be)]),_:2},1032,["href","class"]))),128))])])):T("",!0),e("div",Ee,[r(l(p),{href:"/visa-codes/my-codes",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20 hover:border-blue-500 transition-all duration-200 group"},{default:i(()=>[e("div",He,[r(l(h),{size:24,class:"text-blue-400 group-hover:text-blue-300"}),t[17]||(t[17]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-blue-300"},"My Visa Codes"),e("p",{class:"text-blue-400 text-sm"},"View purchased codes")],-1))])]),_:1}),r(l(p),{href:"/visa-codes/purchase",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20 hover:border-green-500 transition-all duration-200 group"},{default:i(()=>[e("div",Me,[r(l(V),{size:24,class:"text-green-400 group-hover:text-green-300"}),t[18]||(t[18]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-green-300"},"Purchase More"),e("p",{class:"text-green-400 text-sm"},"Buy new visa codes")],-1))])]),_:1}),r(l(p),{href:"/wallet",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20 hover:border-purple-500 transition-all duration-200 group"},{default:i(()=>[e("div",Ae,[r(l(A),{size:24,class:"text-purple-400 group-hover:text-purple-300"}),t[19]||(t[19]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-purple-300"},"Wallet"),e("p",{class:"text-purple-400 text-sm"},"Manage your balance")],-1))])]),_:1})])])])]),_:1}))}};export{Re as default};
