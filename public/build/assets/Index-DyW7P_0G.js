import{r as h,a as b,o,w as S,b as e,d as n,u as r,e as c,f as v,t as a,F as k,h as _,n as D,x as F,m as V,v as I,p as j,i as $}from"./app-Df7980VK.js";import{L as O,_ as Y}from"./DashboardLayout-DgP9U11H.js";import{c as H}from"./createLucideIcon-B2idOK5Q.js";import{A as P}from"./award-Bdw8jKIu.js";import{C as z}from"./circle-check-big-Cdqwp_ac.js";import{L as y}from"./loader-circle-DjhAMbSa.js";import{K as B}from"./key-BwcwKj9o.js";import{S as L}from"./shield-check-QLg1zDDL.js";import{C as E}from"./copy-BxdlFzpQ.js";import{H as M}from"./history-DkSVdM6L.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./eye-BVmq6qp3.js";import"./menu-ByyJuZzl.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=H("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),q={class:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-blue-500/20"},J={class:"p-4 lg:p-8"},T={class:"max-w-7xl mx-auto"},U={class:"mb-8"},X={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20"},Z={class:"flex flex-col lg:flex-row items-center justify-between gap-4"},G={class:"text-2xl font-bold text-purple-400"},Q={class:"text-center"},W={class:"text-2xl font-bold text-white"},ee={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},te={class:"bg-gradient-to-br from-blue-600/40 to-cyan-600/40 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20"},se={class:"text-center mb-6"},oe={class:"text-2xl font-bold text-white mb-2"},ae={class:"text-3xl font-bold text-white mb-1"},le={class:"text-blue-200 text-sm"},ie={class:"space-y-2 mb-6"},re={class:"text-blue-100"},ce=["disabled"],ne={key:1},de={class:"bg-gradient-to-br from-green-600/40 to-emerald-600/40 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20"},ue={class:"text-center mb-6"},be={class:"text-2xl font-bold text-white mb-2"},xe={class:"text-3xl font-bold text-white mb-1"},me={class:"text-green-200 text-sm"},pe={class:"space-y-2 mb-6"},fe={class:"text-green-100"},ge=["disabled"],he={key:1},ve={class:"bg-gradient-to-br from-purple-600/40 to-pink-600/40 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20"},ke={class:"text-center mb-6"},_e={class:"text-2xl font-bold text-white mb-2"},ye={class:"text-3xl font-bold text-white mb-1"},we={class:"text-purple-200 text-sm"},Ce={class:"space-y-2 mb-6"},Se={class:"text-purple-100"},Pe=["disabled"],ze={key:1},Ee={key:0,class:"mb-8"},je={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},$e={class:"flex items-center justify-between mb-4"},Be={class:"flex items-center space-x-3"},Le={class:"text-lg font-bold text-white"},Ae={class:"space-y-3"},Ke={class:"flex justify-between items-center"},Ne={class:"text-sm font-semibold"},De={class:"flex justify-between items-center"},Fe={class:"text-sm font-semibold"},Ve={class:"flex justify-between items-center"},Ie={class:"text-sm font-semibold"},Oe={key:0,class:"mt-4"},Ye={class:"flex items-center justify-between bg-black/30 rounded-xl p-3"},He={class:"text-white font-mono text-sm"},Me=["onClick"],Re={key:1,class:"mt-4"},qe={class:"flex items-center justify-between bg-black/30 rounded-xl p-3"},Je={class:"text-white font-mono text-sm"},Te=["onClick"],Ue={key:2,class:"mt-4"},Xe={class:"flex items-center justify-between bg-black/30 rounded-xl p-3"},Ze={class:"text-white font-mono text-sm"},Ge=["onClick"],Qe={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20"},We={class:"flex items-center space-x-2"},et=["disabled"],tt={key:1},st={class:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-4"},ot={class:"flex items-center space-x-3"},at={class:"flex items-center space-x-3"},ht={__name:"Index",props:{packages:Object,activePurchases:Array,userBalance:Number},setup(l){const x=l,d=h(!1),m=h(null),p=h(""),f=h(!1),g=i=>x.userBalance>=i,A=i=>{switch(i){case"certification":return"bg-gradient-to-br from-blue-600/40 to-cyan-600/40 border-blue-500/30 shadow-blue-500/20";case"access_code":return"bg-gradient-to-br from-green-600/40 to-emerald-600/40 border-green-500/30 shadow-green-500/20";case"verification":return"bg-gradient-to-br from-purple-600/40 to-pink-600/40 border-purple-500/30 shadow-purple-500/20";default:return"bg-gradient-to-br from-slate-600/40 to-slate-700/40 border-slate-500/30"}},K=i=>{switch(i){case"certification":return P;case"access_code":return B;case"verification":return L;default:return P}},w=async i=>{if(!g(x.packages[i].amount)){alert(`Insufficient balance. You need KES ${x.packages[i].amount.toLocaleString()}`);return}if(confirm(`Are you sure you want to purchase ${x.packages[i].name} for KES ${x.packages[i].amount.toLocaleString()}?`)){m.value=i,d.value=!0;try{await $.post("/certification/purchase",{package_type:i},{preserveScroll:!0,onSuccess:t=>{const s=t?.props?.flash||{};s.success?(alert(s.success),$.reload()):s.error&&alert(s.error)},onError:t=>{console.error("Error purchasing package:",t),alert("Failed to purchase package. Please try again.")}})}catch(t){console.error("Error purchasing package:",t),alert("An unexpected error occurred.")}finally{d.value=!1,m.value=null}}},C=async i=>{try{await navigator.clipboard.writeText(i),alert("Copied to clipboard!")}catch(t){console.error("Failed to copy:",t),alert("Failed to copy to clipboard.")}},N=async()=>{if(p.value.trim()){f.value=!0;try{const t=await(await fetch("/certification/check-status",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({code:p.value})})).json();t.valid?alert(`Package: ${t.data.package_name}
Status: ${t.data.status}
Expires: ${t.data.expires_at||"Never"}
Active: ${t.data.is_active?"Yes":"No"}`):alert(t.message||"Invalid code.")}catch(i){console.error("Error checking status:",i),alert("Failed to check package status.")}finally{f.value=!1}}};return(i,t)=>(o(),b(Y,{title:"Certification"},{default:S(()=>[e("div",q,[n(r(R),{size:16,class:"text-blue-400"}),t[4]||(t[4]=e("span",null,"Certification",-1)),t[5]||(t[5]=e("span",{class:"text-blue-400"},"â€º",-1)),t[6]||(t[6]=e("span",{class:"text-blue-300"},"Packages",-1))]),e("div",J,[e("div",T,[e("div",U,[e("div",X,[e("div",Z,[e("div",null,[t[7]||(t[7]=e("h3",{class:"text-lg font-bold text-white mb-1"},"Your Balance",-1)),e("p",G,"KES "+a(l.userBalance.toLocaleString()),1)]),e("div",Q,[t[8]||(t[8]=e("p",{class:"text-purple-300 text-sm mb-1"},"Active Packages",-1)),e("p",W,a(l.activePurchases.filter(s=>s.is_active).length),1)])])])]),e("div",ee,[e("div",te,[e("div",se,[n(r(P),{size:48,class:"mx-auto text-blue-400 mb-4"}),e("h3",oe,a(l.packages.certification.name),1),e("div",ae,"KES "+a(l.packages.certification.amount.toLocaleString()),1),e("p",le,a(l.packages.certification.duration_days)+" days validity",1)]),e("ul",ie,[(o(!0),c(k,null,_(l.packages.certification.features,(s,u)=>(o(),c("li",{key:u,class:"flex items-start space-x-2 text-sm"},[n(r(z),{size:16,class:"text-green-400 mt-0.5 flex-shrink-0"}),e("span",re,a(s),1)]))),128))]),e("button",{onClick:t[0]||(t[0]=s=>w("certification")),disabled:!g(l.packages.certification.amount)||d.value,class:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 shadow-lg shadow-blue-500/50 flex items-center justify-center space-x-2"},[d.value&&m.value==="certification"?(o(),b(r(y),{key:0,size:20,class:"animate-spin"})):(o(),c("span",ne,"Purchase Package"))],8,ce)]),e("div",de,[e("div",ue,[n(r(B),{size:48,class:"mx-auto text-green-400 mb-4"}),e("h3",be,a(l.packages.access_code.name),1),e("div",xe,"KES "+a(l.packages.access_code.amount.toLocaleString()),1),e("p",me,a(l.packages.access_code.duration_days)+" days validity",1)]),e("ul",pe,[(o(!0),c(k,null,_(l.packages.access_code.features,(s,u)=>(o(),c("li",{key:u,class:"flex items-start space-x-2 text-sm"},[n(r(z),{size:16,class:"text-green-400 mt-0.5 flex-shrink-0"}),e("span",fe,a(s),1)]))),128))]),e("button",{onClick:t[1]||(t[1]=s=>w("access_code")),disabled:!g(l.packages.access_code.amount)||d.value,class:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 shadow-lg shadow-green-500/50 flex items-center justify-center space-x-2"},[d.value&&m.value==="access_code"?(o(),b(r(y),{key:0,size:20,class:"animate-spin"})):(o(),c("span",he,"Purchase Package"))],8,ge)]),e("div",ve,[e("div",ke,[n(r(L),{size:48,class:"mx-auto text-purple-400 mb-4"}),e("h3",_e,a(l.packages.verification.name),1),e("div",ye,"KES "+a(l.packages.verification.amount.toLocaleString()),1),e("p",we,a(l.packages.verification.duration_days)+" days validity",1)]),e("ul",Ce,[(o(!0),c(k,null,_(l.packages.verification.features,(s,u)=>(o(),c("li",{key:u,class:"flex items-start space-x-2 text-sm"},[n(r(z),{size:16,class:"text-green-400 mt-0.5 flex-shrink-0"}),e("span",Se,a(s),1)]))),128))]),e("button",{onClick:t[2]||(t[2]=s=>w("verification")),disabled:!g(l.packages.verification.amount)||d.value,class:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/50 flex items-center justify-center space-x-2"},[d.value&&m.value==="verification"?(o(),b(r(y),{key:0,size:20,class:"animate-spin"})):(o(),c("span",ze,"Purchase Package"))],8,Pe)])]),l.activePurchases.length>0?(o(),c("div",Ee,[t[16]||(t[16]=e("h3",{class:"text-xl font-bold text-white mb-6"},"Your Active Packages",-1)),e("div",je,[(o(!0),c(k,null,_(l.activePurchases.filter(s=>s.is_active),s=>(o(),c("div",{key:s.id,class:D([A(s.package_type),"backdrop-blur-xl border rounded-2xl p-6 shadow-2xl"])},[e("div",$e,[e("div",Be,[(o(),b(F(K(s.package_type)),{size:24})),e("h4",Le,a(s.package_name),1)]),t[9]||(t[9]=e("span",{class:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-xs font-semibold"}," Active ",-1))]),e("div",Ae,[e("div",Ke,[t[10]||(t[10]=e("span",{class:"text-sm opacity-75"},"Purchase Date",-1)),e("span",Ne,a(s.activated_at),1)]),e("div",De,[t[11]||(t[11]=e("span",{class:"text-sm opacity-75"},"Expires",-1)),e("span",Fe,a(s.expires_at),1)]),e("div",Ve,[t[12]||(t[12]=e("span",{class:"text-sm opacity-75"},"Days Remaining",-1)),e("span",Ie,a(s.days_remaining)+" days",1)]),s.codes.certification?(o(),c("div",Oe,[t[13]||(t[13]=e("p",{class:"text-sm opacity-75 mb-1"},"Certification Code",-1)),e("div",Ye,[e("code",He,a(s.codes.certification),1),e("button",{onClick:u=>C(s.codes.certification),class:"text-blue-400 hover:text-blue-300"},[n(r(E),{size:16})],8,Me)])])):v("",!0),s.codes.access?(o(),c("div",Re,[t[14]||(t[14]=e("p",{class:"text-sm opacity-75 mb-1"},"Access Code",-1)),e("div",qe,[e("code",Je,a(s.codes.access),1),e("button",{onClick:u=>C(s.codes.access),class:"text-blue-400 hover:text-blue-300"},[n(r(E),{size:16})],8,Te)])])):v("",!0),s.codes.verification?(o(),c("div",Ue,[t[15]||(t[15]=e("p",{class:"text-sm opacity-75 mb-1"},"Verification Code",-1)),e("div",Xe,[e("code",Ze,a(s.codes.verification),1),e("button",{onClick:u=>C(s.codes.verification),class:"text-blue-400 hover:text-blue-300"},[n(r(E),{size:16})],8,Ge)])])):v("",!0)])],2))),128))])])):v("",!0),e("div",Qe,[t[17]||(t[17]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Check Package Status",-1)),e("div",We,[V(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),type:"text",placeholder:"Enter certification/access/verification code",class:"flex-1 bg-black/30 border border-blue-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-blue-400"},null,512),[[I,p.value]]),e("button",{onClick:N,disabled:!p.value||f.value,class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg shadow-blue-500/50"},[f.value?(o(),b(r(y),{key:0,size:20,class:"animate-spin"})):(o(),c("span",tt,"Check"))],8,et)])]),e("div",st,[n(r(j),{href:"/certification/history",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20 hover:border-purple-500 transition-all duration-200 group"},{default:S(()=>[e("div",ot,[n(r(M),{size:24,class:"text-purple-400 group-hover:text-purple-300"}),t[18]||(t[18]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-purple-300"},"Purchase History"),e("p",{class:"text-purple-400 text-sm"},"View all your certification purchases")],-1))])]),_:1}),n(r(j),{href:"/dashboard",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20 hover:border-blue-500 transition-all duration-200 group"},{default:S(()=>[e("div",at,[n(r(O),{size:24,class:"text-blue-400 group-hover:text-blue-300"}),t[19]||(t[19]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-blue-300"},"Dashboard"),e("p",{class:"text-blue-400 text-sm"},"Back to dashboard")],-1))])]),_:1})])])])]),_:1}))}};export{ht as default};
