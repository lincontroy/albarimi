import{r as z,B as I,c as N,a as v,o as d,w,b as e,d as o,u as l,e as c,f as M,t as i,p as S,l as F,g as m,F as _,h as E,n as P,m as f,v as y,C as U,q as Y,i as $}from"./app-KUgWEtTK.js";import{X as A,_ as q}from"./DashboardLayout-CBd3-9Qr.js";import{A as T}from"./award-D8ycY2eO.js";import{C as V}from"./circle-alert-zp-rkyuY.js";import{C as O}from"./circle-plus-B84xM5g1.js";import{T as W}from"./tag-DaaKjMqX.js";import{S as G}from"./square-pen-ZwMJ-lKy.js";import{F as R}from"./file-text-CW7SMSPg.js";import{L as X}from"./link-CPI0aqlh.js";import{P as H}from"./plus-BclHIRSC.js";import{L as J}from"./loader-circle-COzy0sLb.js";import{F as Q}from"./file-plus-CkYK5nfQ.js";import{C as g}from"./circle-check-big-C1-uGsP2.js";import{C as Z}from"./clock-D3FQRx8N.js";import{I as ee}from"./info-CH6orN5n.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-fdl4BT3X.js";import"./eye-CqiVPK0H.js";import"./menu-hSB8Arlo.js";const te={class:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-purple-500/20"},se={class:"p-4 lg:p-8"},le={class:"max-w-4xl mx-auto"},oe={key:0,class:"mb-6 bg-gradient-to-br from-red-900/30 to-red-800/30 backdrop-blur-xl border border-red-500/30 rounded-2xl p-6 shadow-2xl shadow-red-500/20"},re={class:"flex items-center space-x-3 mb-3"},ne={class:"text-red-300 mb-3"},ie={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ae={class:"lg:col-span-2"},de={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20"},pe={class:"mb-6"},ue={class:"block text-sm font-medium text-purple-300 mb-2"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},me=["onClick"],xe={class:"font-bold mb-1"},be={class:"text-xs"},fe={class:"mb-6"},ge={class:"block text-sm font-medium text-purple-300 mb-2"},he=["disabled"],ye={class:"mb-6"},ke={class:"block text-sm font-medium text-purple-300 mb-2"},ve=["disabled"],we={class:"flex justify-between mt-1"},_e={class:"mb-6"},Ee={class:"block text-sm font-medium text-purple-300 mb-2"},Ce={class:"flex flex-wrap gap-2 mb-2"},Be=["onClick"],ze={class:"flex"},Se=["disabled","onKeydown"],Fe=["disabled"],Pe={class:"mb-6"},Ae={class:"block text-sm font-medium text-purple-300 mb-2"},Te={class:"space-y-2 mb-2"},Ve=["onUpdate:modelValue","disabled"],Ke=["onClick"],De=["disabled"],Le={class:"mb-6"},je={class:"flex items-start space-x-2"},Ie=["disabled"],Ne={for:"terms",class:"text-sm text-purple-300"},Me={class:"flex space-x-3"},Ue=["disabled"],Ye={class:"lg:col-span-1"},$e={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20 mb-6"},qe={class:"space-y-3"},Oe={class:"flex justify-between items-center"},We={class:"font-bold text-white"},Ge={class:"flex justify-between items-center"},Re={class:"font-bold text-purple-400"},Xe={class:"pt-3 border-t border-blue-500/20"},He={class:"flex justify-between items-center mb-2"},Je={class:"font-bold text-white"},Qe={class:"flex justify-between items-center"},Ze={class:"font-bold text-green-400"},et={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20 mb-6"},tt={class:"space-y-2"},st={class:"flex items-start space-x-2 text-sm text-blue-200"},lt={class:"flex items-start space-x-2 text-sm text-blue-200"},ot={class:"flex items-start space-x-2 text-sm text-blue-200"},rt={class:"flex items-start space-x-2 text-sm text-blue-200"},nt={class:"flex items-start space-x-2 text-sm text-blue-200"},it={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-yellow-500/30 rounded-2xl p-6 shadow-2xl shadow-yellow-500/20"},at={class:"space-y-2"},dt={class:"flex items-center space-x-2"},pt={class:"flex items-center space-x-2"},ut={class:"flex items-center space-x-2"},At={__name:"Apply",props:{packageFee:{type:Number,default:3500},hasEnoughBalance:{type:Boolean,default:!1},userBalance:{type:[Number,String],default:0},types:{type:Array,default:()=>[]}},setup(r){const h=r,x=z(!1),b=z(""),s=I({type:"professional",title:"",description:"",skills:[],links:[],agreeTerms:!1}),C=N(()=>h.types.find(a=>a.id===s.type)||h.types[0]),u=a=>(parseFloat(a)||0).toLocaleString("en-KE",{minimumFractionDigits:0,maximumFractionDigits:0}),B=()=>{b.value.trim()&&!s.skills.includes(b.value.trim())&&(s.skills.push(b.value.trim()),b.value="")},K=a=>{s.skills.splice(a,1)},D=()=>{s.links.push("")},L=a=>{s.links.splice(a,1)},j=async()=>{if(!h.hasEnoughBalance){alert("Insufficient balance for endorsement package");return}if(!s.type){alert("Please select an endorsement type");return}if(!s.title.trim()){alert("Please enter an endorsement title");return}if(s.description.length<100){alert("Description must be at least 100 characters");return}if(!s.agreeTerms){alert("You must agree to the terms and conditions");return}const a=`Are you sure you want to apply for ${C.value.name} endorsement? KES ${u(h.packageFee)} will be deducted from your balance.`;if(confirm(a)){x.value=!0;try{await $.post("/endorsement/apply",s,{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Endorsement application error:",t),alert("Failed to submit application. Please check the form and try again."),x.value=!1}})}catch(t){console.error("Endorsement application error:",t),alert("An unexpected error occurred. Please try again."),x.value=!1}}};return(a,t)=>(d(),v(q,{title:"Apply for Endorsement"},{default:w(()=>[e("div",te,[o(l(T),{size:16,class:"text-purple-400"}),t[4]||(t[4]=e("span",null,"Endorsements",-1)),t[5]||(t[5]=e("span",{class:"text-purple-400"},"â€º",-1)),t[6]||(t[6]=e("span",{class:"text-purple-300"},"Apply",-1))]),e("div",se,[e("div",le,[t[35]||(t[35]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl lg:text-3xl font-bold text-white mb-2"},"Apply for Endorsement"),e("p",{class:"text-purple-300"},"Complete your application to get verified and endorsed")],-1)),r.hasEnoughBalance?M("",!0):(d(),c("div",oe,[e("div",re,[o(l(V),{size:24,class:"text-red-400"}),t[7]||(t[7]=e("h3",{class:"text-lg font-bold text-white"},"Insufficient Balance",-1))]),e("p",ne," You need at least KES "+i(u(r.packageFee))+" for the endorsement package. Your current balance is KES "+i(u(r.userBalance))+". ",1),o(l(S),{href:"/wallet/deposit",class:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200 inline-flex items-center space-x-2"},{default:w(()=>[o(l(O),{size:16}),t[8]||(t[8]=e("span",null,"Deposit Funds",-1))]),_:1})])),e("div",ie,[e("div",ae,[e("div",de,[t[18]||(t[18]=e("h3",{class:"text-xl font-bold text-white mb-6"},"Endorsement Application",-1)),e("form",{onSubmit:F(j,["prevent"])},[e("div",pe,[e("label",ue,[o(l(W),{size:16,class:"inline mr-2"}),t[9]||(t[9]=m(" Endorsement Type "))]),e("div",ce,[(d(!0),c(_,null,E(r.types,n=>(d(),c("button",{key:n.id,type:"button",onClick:p=>s.type=n.id,class:P([s.type===n.id?"bg-purple-600 text-white border-purple-500":"bg-black/30 text-purple-300 border-purple-500/30","border rounded-lg p-4 text-left transition-all duration-200"])},[e("h4",xe,i(n.name),1),e("p",be,i(n.description),1)],10,me))),128))])]),e("div",fe,[e("label",ge,[o(l(G),{size:16,class:"inline mr-2"}),t[10]||(t[10]=m(" Endorsement Title "))]),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>s.title=n),type:"text",required:"",disabled:!r.hasEnoughBalance,class:"w-full bg-black/30 border border-purple-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-purple-400 disabled:opacity-50",placeholder:"e.g., Certified Web Developer, Professional Photographer"},null,8,he),[[y,s.title]]),t[11]||(t[11]=e("p",{class:"text-xs text-purple-400 mt-1"},"Be clear and descriptive about what you want endorsed",-1))]),e("div",ye,[e("label",ke,[o(l(R),{size:16,class:"inline mr-2"}),t[12]||(t[12]=m(" Detailed Description "))]),f(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>s.description=n),rows:"5",required:"",disabled:!r.hasEnoughBalance,class:"w-full bg-black/30 border border-purple-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-purple-400 disabled:opacity-50",placeholder:"Describe your skills, experience, or what you want endorsed in detail..."},null,8,ve),[[y,s.description]]),e("div",we,[t[13]||(t[13]=e("span",{class:"text-xs text-purple-400"},"Minimum 100 characters",-1)),e("span",{class:P(["text-xs",s.description.length>=100?"text-green-400":"text-red-400"])},i(s.description.length)+"/2000 ",3)])]),e("div",_e,[e("label",Ee,[o(l(T),{size:16,class:"inline mr-2"}),t[14]||(t[14]=m(" Skills & Expertise (Optional) "))]),e("div",Ce,[(d(!0),c(_,null,E(s.skills,(n,p)=>(d(),c("span",{key:p,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-600/20 text-purple-300"},[m(i(n)+" ",1),e("button",{type:"button",onClick:k=>K(p),class:"ml-2 text-purple-400 hover:text-purple-300"},[o(l(A),{size:12})],8,Be)]))),128))]),e("div",ze,[f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>b.value=n),type:"text",disabled:!r.hasEnoughBalance,onKeydown:U(F(B,["prevent"]),["enter"]),class:"flex-1 bg-black/30 border border-purple-500/30 text-white rounded-l-xl px-4 py-3 focus:outline-none focus:border-purple-400 disabled:opacity-50",placeholder:"Add a skill"},null,40,Se),[[y,b.value]]),e("button",{type:"button",onClick:B,disabled:!r.hasEnoughBalance,class:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-3 rounded-r-xl transition-all duration-200 disabled:opacity-50"}," Add ",8,Fe)])]),e("div",Pe,[e("label",Ae,[o(l(X),{size:16,class:"inline mr-2"}),t[15]||(t[15]=m(" Supporting Links (Optional) "))]),e("div",Te,[(d(!0),c(_,null,E(s.links,(n,p)=>(d(),c("div",{key:p,class:"flex items-center"},[f(e("input",{"onUpdate:modelValue":k=>s.links[p]=k,type:"url",disabled:!r.hasEnoughBalance,class:"flex-1 bg-black/30 border border-purple-500/30 text-white rounded-xl px-4 py-2 focus:outline-none focus:border-purple-400 disabled:opacity-50",placeholder:"https://example.com"},null,8,Ve),[[y,s.links[p]]]),e("button",{type:"button",onClick:k=>L(p),class:"ml-2 text-red-400 hover:text-red-300"},[o(l(A),{size:16})],8,Ke)]))),128))]),e("button",{type:"button",onClick:D,disabled:!r.hasEnoughBalance,class:"text-purple-400 hover:text-purple-300 text-sm flex items-center space-x-1"},[o(l(H),{size:14}),t[16]||(t[16]=e("span",null,"Add another link",-1))],8,De)]),e("div",Le,[e("div",je,[f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>s.agreeTerms=n),type:"checkbox",id:"terms",disabled:!r.hasEnoughBalance,required:"",class:"mt-1"},null,8,Ie),[[Y,s.agreeTerms]]),e("label",Ne," I agree to the endorsement terms and conditions. I understand that a non-refundable package fee of KES "+i(u(r.packageFee))+" will be deducted from my balance for 12 months of endorsement. ",1)])]),e("div",Me,[e("button",{type:"submit",disabled:!r.hasEnoughBalance||x.value||s.description.length<100,class:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2"},[x.value?(d(),v(l(J),{key:0,class:"animate-spin",size:20})):(d(),v(l(Q),{key:1,size:20})),e("span",null,i(x.value?"Processing...":"Submit Application"),1)],8,Ue),o(l(S),{href:"/endorsement",class:"flex-1 border border-purple-500/30 text-purple-400 hover:bg-purple-500/20 py-3 px-6 rounded-lg text-center transition-all duration-200"},{default:w(()=>t[17]||(t[17]=[m(" Cancel ")])),_:1})])],32)])]),e("div",Ye,[e("div",$e,[t[24]||(t[24]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Package Summary",-1)),e("div",qe,[e("div",Oe,[t[19]||(t[19]=e("span",{class:"text-sm text-blue-300"},"Endorsement Type",-1)),e("span",We,i(C.value?.name||"Not selected"),1)]),e("div",Ge,[t[20]||(t[20]=e("span",{class:"text-sm text-blue-300"},"Package Fee",-1)),e("span",Re,"KES "+i(u(r.packageFee)),1)]),t[23]||(t[23]=e("div",{class:"flex justify-between items-center"},[e("span",{class:"text-sm text-blue-300"},"Validity Period"),e("span",{class:"font-bold text-white"},"12 Months")],-1)),e("div",Xe,[e("div",He,[t[21]||(t[21]=e("span",{class:"text-sm text-blue-300"},"Your Balance",-1)),e("span",Je,"KES "+i(u(r.userBalance)),1)]),e("div",Qe,[t[22]||(t[22]=e("span",{class:"text-sm text-blue-300"},"After Payment",-1)),e("span",Ze,"KES "+i(u(r.userBalance-r.packageFee)),1)])])])]),e("div",et,[t[30]||(t[30]=e("h3",{class:"text-lg font-bold text-white mb-4"},"What You Get",-1)),e("ul",tt,[e("li",st,[o(l(g),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[25]||(t[25]=e("span",null,"Verified badge on your profile",-1))]),e("li",lt,[o(l(g),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[26]||(t[26]=e("span",null,"Priority in search results",-1))]),e("li",ot,[o(l(g),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[27]||(t[27]=e("span",null,"Increased credibility",-1))]),e("li",rt,[o(l(g),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[28]||(t[28]=e("span",null,"12 months validity",-1))]),e("li",nt,[o(l(g),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[29]||(t[29]=e("span",null,"Professional review process",-1))])])]),e("div",it,[t[34]||(t[34]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Processing Time",-1)),e("div",at,[e("div",dt,[o(l(Z),{size:16,class:"text-yellow-400"}),t[31]||(t[31]=e("span",{class:"text-sm text-yellow-300"},"Review: 3-5 business days",-1))]),e("div",pt,[o(l(V),{size:16,class:"text-yellow-400"}),t[32]||(t[32]=e("span",{class:"text-sm text-yellow-300"},"Fee is non-refundable",-1))]),e("div",ut,[o(l(ee),{size:16,class:"text-yellow-400"}),t[33]||(t[33]=e("span",{class:"text-sm text-yellow-300"},"You'll be notified via email",-1))])])])])])])])]),_:1}))}};export{At as default};
