import{r as g,c as M,a as S,o as p,w as U,b as e,d as a,u as n,l as x,g as b,m as k,v as C,n as h,e as m,t as l,f as A,F as B,h as K,i as w}from"./app-B44wr4c_.js";import{_ as O}from"./DashboardLayout-C2D5VWEJ.js";import{n as f}from"./toastr-D1OtBUyj.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as y}from"./eye-By03grgf.js";import{P as G}from"./phone-CsKYHEX2.js";import{c as $}from"./createLucideIcon-CNz6d2hL.js";import{L as H}from"./loader-circle-JNCLJVDx.js";import{C as v}from"./circle-check-big-D6jT3KiE.js";import{R as J}from"./refresh-cw-BpTnAbkh.js";import{E as X}from"./eye-off-Geusl7Z-.js";import"./menu-BwH3VRfh.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=$("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Q={class:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-purple-500/20"},Z={class:"p-4 lg:p-8"},ee={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},te={class:"lg:col-span-2 bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20"},se={class:"relative"},oe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},re={class:"relative"},le={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ne={key:0},ae={key:1,class:"flex items-center justify-center space-x-4"},ie=["src"],pe={class:"text-left"},ue={class:"text-green-400 text-sm"},de={class:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-xl p-4 border border-purple-500/30"},ce={class:"flex justify-between items-center"},me={class:"text-2xl font-bold text-white"},xe={class:"text-right"},be={class:"text-purple-400 text-xs"},fe={class:"text-purple-300 text-xs mt-1"},ve=["disabled"],ge={class:"space-y-6"},he={class:"bg-gradient-to-br from-green-600/40 to-emerald-600/40 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20"},we={class:"space-y-4"},ye={class:"flex justify-between items-center"},_e={class:"text-white font-bold"},Se={class:"flex justify-between items-center"},ke={class:"text-white font-bold"},Ce={class:"flex justify-between items-center"},Ae={class:"text-yellow-400 font-bold"},De={class:"flex justify-between items-center"},je={class:"text-green-400 font-bold"},Ee={class:"bg-gradient-to-br from-blue-600/40 to-cyan-600/40 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20"},Pe={class:"space-y-2 text-sm"},Le={class:"flex items-start space-x-2"},Ve={class:"flex items-start space-x-2"},We={class:"flex items-start space-x-2"},ze={class:"flex items-start space-x-2"},Fe={class:"mt-8 bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20"},Re={class:"flex justify-between items-center mb-6"},Ne={class:"overflow-x-auto"},Te={class:"w-full"},Ie={class:"py-3 px-4 text-white font-mono"},Me={class:"py-3 px-4 text-white"},Ue={class:"py-3 px-4"},Be={class:"text-green-400 font-bold"},Ke={class:"py-3 px-4 text-purple-300"},Oe={class:"py-3 px-4 text-purple-300 text-sm"},qe={class:"py-3 px-4"},Ge={class:"py-3 px-4"},$e=["onClick"],He={key:0,class:"text-center py-8"},Je={__name:"Index",props:{submissions:Array,stats:Object},setup(u){const s=g({whatsapp_number:"",views_count:"",screenshot:null,screenshotPreview:null}),d=g(!1),c=g(null),_=M(()=>s.value.whatsapp_number&&s.value.views_count>0&&s.value.screenshot),D=()=>{c.value?.click()},j=r=>{const t=r.target.files[0];if(t&&t.type.startsWith("image/")){s.value.screenshot=t;const o=new FileReader;o.onload=i=>{s.value.screenshotPreview=i.target.result},o.readAsDataURL(t)}},E=r=>{r.preventDefault();const t=r.dataTransfer.files[0];if(t&&t.type.startsWith("image/")){s.value.screenshot=t;const o=new FileReader;o.onload=i=>{s.value.screenshotPreview=i.target.result},o.readAsDataURL(t)}},P=()=>{s.value.screenshot=null,s.value.screenshotPreview=null,c.value&&(c.value.value="")},L=()=>s.value.views_count?s.value.views_count*100:0,V=async()=>{if(!(!_.value||d.value)){d.value=!0;try{const r=new FormData;r.append("whatsapp_number",s.value.whatsapp_number),r.append("views_count",s.value.views_count),r.append("screenshot",s.value.screenshot);const t=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",o=await fetch("/cash-flow/submit-views",{method:"POST",headers:{"X-CSRF-TOKEN":t,Accept:"application/json"},credentials:"include",body:r}),i=await o.json();if(console.log("Submission response:",i),o.ok)W(),f.success(i.message),setTimeout(()=>{w.reload({only:["submissions","stats"]})},1500);else if(i.errors){const I=Object.values(i.errors).flat().join(`
`);f.error(I)}else f.error(i.message||"Failed to submit WhatsApp views. Please try again.")}catch(r){console.error("Error submitting views:",r),f.error("Network error. Please check your connection and try again.")}finally{d.value=!1}}},W=()=>{s.value={whatsapp_number:"",views_count:"",screenshot:null,screenshotPreview:null},c.value&&(c.value.value="")},z=()=>{w.reload({only:["submissions","stats"]})},F=r=>{w.visit(`/cash-flow/submit-views/${r.id}`)},R=r=>({pending:"bg-yellow-500/20 text-yellow-300",approved:"bg-green-500/20 text-green-300",rejected:"bg-red-500/20 text-red-300",processing:"bg-blue-500/20 text-blue-300"})[r.toLowerCase()]||"bg-gray-500/20 text-gray-300",N=r=>({pending:"bg-yellow-400",approved:"bg-green-400",rejected:"bg-red-400",processing:"bg-blue-400"})[r.toLowerCase()]||"bg-gray-400",T=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(r,t)=>(p(),S(O,{title:"Submit Views"},{default:U(()=>[e("div",Q,[a(n(y),{size:16,class:"text-purple-400"}),t[4]||(t[4]=e("span",null,"Cash Flow",-1)),t[5]||(t[5]=e("span",{class:"text-purple-400"},"â€º",-1)),t[6]||(t[6]=e("span",{class:"text-purple-300"},"Submit Views",-1))]),e("div",Z,[e("div",ee,[e("div",te,[t[18]||(t[18]=e("h2",{class:"text-2xl font-bold text-white mb-2"},"Submit WhatsApp Views",-1)),t[19]||(t[19]=e("p",{class:"text-purple-300 mb-6"},"Submit your WhatsApp status/story views for verification and earning",-1)),e("form",{onSubmit:x(V,["prevent"]),class:"space-y-6"},[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-purple-300 text-sm font-medium mb-2"},[b(" WhatsApp Number "),e("span",{class:"text-red-400"},"*")],-1)),e("div",se,[e("div",oe,[a(n(G),{size:20,class:"text-purple-400"})]),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.whatsapp_number=o),type:"tel",required:"",placeholder:"254712345678",class:"w-full bg-slate-800/50 border border-purple-500/30 rounded-xl pl-10 pr-4 py-3 text-white placeholder-purple-400/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"},null,512),[[C,s.value.whatsapp_number]])]),t[8]||(t[8]=e("p",{class:"text-xs text-purple-400 mt-1"},"Format: 254712345678 (without +)",-1))]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-purple-300 text-sm font-medium mb-2"},[b(" Number of Views "),e("span",{class:"text-red-400"},"*")],-1)),e("div",re,[e("div",le,[a(n(y),{size:20,class:"text-purple-400"})]),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.views_count=o),type:"number",min:"1",max:"10000",required:"",placeholder:"Enter number of views",class:"w-full bg-slate-800/50 border border-purple-500/30 rounded-xl pl-10 pr-4 py-3 text-white placeholder-purple-400/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"},null,512),[[C,s.value.views_count,void 0,{number:!0}]])]),t[10]||(t[10]=e("p",{class:"text-xs text-purple-400 mt-1"},"Maximum 10,000 views per submission",-1))]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-purple-300 text-sm font-medium mb-2"},[b(" Screenshot Proof "),e("span",{class:"text-red-400"},"*")],-1)),e("div",{onClick:D,onDrop:E,onDragover:t[2]||(t[2]=x(()=>{},["prevent"])),onDragenter:t[3]||(t[3]=x(()=>{},["prevent"])),class:h(["border-2 border-dashed border-purple-500/30 rounded-xl p-6 text-center cursor-pointer transition-all duration-200 hover:border-purple-500 hover:bg-purple-500/10",s.value.screenshot?"border-green-500/50 bg-green-500/10":""])},[e("input",{ref_key:"fileInput",ref:c,type:"file",accept:"image/*",onChange:j,class:"hidden"},null,544),s.value.screenshot?(p(),m("div",ae,[e("img",{src:s.value.screenshotPreview,class:"w-16 h-16 object-cover rounded-lg border border-purple-500/30"},null,8,ie),e("div",pe,[t[14]||(t[14]=e("p",{class:"text-white font-medium"},"Screenshot Selected",-1)),e("p",ue,l(s.value.screenshot.name),1),e("button",{type:"button",onClick:x(P,["stop"]),class:"text-red-400 hover:text-red-300 text-sm mt-1 transition-colors"}," Remove ")])])):(p(),m("div",ne,[a(n(Y),{size:48,class:"mx-auto text-purple-400 mb-3"}),t[11]||(t[11]=e("p",{class:"text-white font-medium"},"Upload WhatsApp Screenshot",-1)),t[12]||(t[12]=e("p",{class:"text-purple-400 text-sm mt-1"},"PNG, JPG up to 5MB",-1)),t[13]||(t[13]=e("p",{class:"text-purple-300 text-xs mt-2"},"or drag and drop",-1))]))],34)]),e("div",de,[e("div",ce,[e("div",null,[t[16]||(t[16]=e("p",{class:"text-purple-300 text-sm"},"Estimated Earnings",-1)),e("p",me," KES "+l(L().toLocaleString()),1)]),e("div",xe,[t[17]||(t[17]=e("p",{class:"text-purple-300 text-sm"},"Rate: KES 100/view",-1)),e("p",be,l(s.value.views_count||0)+" views",1),e("p",fe,l(s.value.view_type||"Select view type"),1)])])]),e("button",{type:"submit",disabled:!_.value||d.value,class:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-medium py-4 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/50 flex items-center justify-center space-x-2"},[d.value?(p(),S(n(H),{key:0,size:20,class:"animate-spin"})):A("",!0),e("span",null,l(d.value?"Submitting...":"Submit WhatsApp Views"),1)],8,ve)],32)]),e("div",ge,[e("div",he,[t[24]||(t[24]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Your WhatsApp View Stats",-1)),e("div",we,[e("div",ye,[t[20]||(t[20]=e("span",{class:"text-green-200"},"Total Submitted",-1)),e("span",_e,l(u.stats.total_views.toLocaleString()),1)]),e("div",Se,[t[21]||(t[21]=e("span",{class:"text-green-200"},"Total Earned",-1)),e("span",ke,"KES "+l(u.stats.total_earned.toLocaleString()),1)]),e("div",Ce,[t[22]||(t[22]=e("span",{class:"text-green-200"},"Pending",-1)),e("span",Ae,l(u.stats.pending_views.toLocaleString()),1)]),e("div",De,[t[23]||(t[23]=e("span",{class:"text-green-200"},"Approved",-1)),e("span",je,l(u.stats.approved_views.toLocaleString()),1)])])]),e("div",Ee,[t[29]||(t[29]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Submission Guidelines",-1)),e("ul",Pe,[e("li",Le,[a(n(v),{size:16,class:"text-green-400 mt-0.5 flex-shrink-0"}),t[25]||(t[25]=e("span",{class:"text-blue-100"},"Clear screenshot showing WhatsApp view count",-1))]),e("li",Ve,[a(n(v),{size:16,class:"text-green-400 mt-0.5 flex-shrink-0"}),t[26]||(t[26]=e("span",{class:"text-blue-100"},"WhatsApp number must be active and verified",-1))]),e("li",We,[a(n(v),{size:16,class:"text-green-400 mt-0.5 flex-shrink-0"}),t[27]||(t[27]=e("span",{class:"text-blue-100"},"Maximum 10,000 views per submission",-1))]),e("li",ze,[a(n(v),{size:16,class:"text-green-400 mt-0.5 flex-shrink-0"}),t[28]||(t[28]=e("span",{class:"text-blue-100"},"Processing time: 24-48 hours",-1))])])])])]),e("div",Fe,[e("div",Re,[t[31]||(t[31]=e("h3",{class:"text-xl font-bold text-white"},"Recent WhatsApp Submissions",-1)),e("button",{onClick:z,class:"bg-purple-600 hover:bg-purple-500 px-4 py-2 rounded-xl text-white text-sm transition-all duration-200 flex items-center space-x-2"},[a(n(J),{size:16}),t[30]||(t[30]=e("span",null,"Refresh",-1))])]),e("div",Ne,[e("table",Te,[t[32]||(t[32]=e("thead",null,[e("tr",{class:"border-b border-purple-500/30"},[e("th",{class:"text-left py-3 px-4 text-purple-300 font-medium"},"ID"),e("th",{class:"text-left py-3 px-4 text-purple-300 font-medium"},"Views"),e("th",{class:"text-left py-3 px-4 text-purple-300 font-medium"},"Earned"),e("th",{class:"text-left py-3 px-4 text-purple-300 font-medium"},"Phone"),e("th",{class:"text-left py-3 px-4 text-purple-300 font-medium"},"Date"),e("th",{class:"text-left py-3 px-4 text-purple-300 font-medium"},"Status"),e("th",{class:"text-left py-3 px-4 text-purple-300 font-medium"},"Actions")])],-1)),e("tbody",null,[(p(!0),m(B,null,K(u.submissions,o=>(p(),m("tr",{key:o.id,class:"border-b border-purple-500/10 hover:bg-purple-500/5 transition-colors"},[e("td",Ie,"#"+l(o.id.toString().padStart(6,"0")),1),e("td",Me,l(o.views_count.toLocaleString()),1),e("td",Ue,[e("span",Be,"KES "+l(o.earned_amount.toLocaleString()),1)]),e("td",Ke,l(o.whatsapp_number),1),e("td",Oe,l(T(o.created_at)),1),e("td",qe,[e("span",{class:h(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",R(o.status)])},[e("span",{class:h(["w-2 h-2 rounded-full mr-1.5",N(o.status)])},null,2),b(" "+l(o.status),1)],2)]),e("td",Ge,[e("button",{onClick:i=>F(o),class:"text-purple-400 hover:text-purple-300 transition-colors p-1",title:"View Details"},[a(n(y),{size:16})],8,$e)])]))),128))])]),u.submissions.length===0?(p(),m("div",He,[a(n(X),{size:48,class:"mx-auto text-purple-400 mb-4"}),t[33]||(t[33]=e("p",{class:"text-purple-300 text-lg"},"No WhatsApp submissions yet",-1)),t[34]||(t[34]=e("p",{class:"text-purple-400"},"Start by submitting your first WhatsApp views above",-1))])):A("",!0)])])])]),_:1}))}},it=q(Je,[["__scopeId","data-v-f22e5b2f"]]);export{it as default};
