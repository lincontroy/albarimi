import{c as _,a as h,o as l,w as x,b as t,d as n,u as i,p as u,g as V,e as a,f as p,F as A,h as E,x as P,n as b,t as r,i as m}from"./app-Df7980VK.js";import{B as f,_ as L,a as K}from"./DashboardLayout-DgP9U11H.js";import{H as O}from"./history-DkSVdM6L.js";import{E as z}from"./eye-BVmq6qp3.js";import{R as S}from"./refresh-cw-BsTGQZMA.js";import{C as j}from"./copy-BxdlFzpQ.js";import{C as G,a as I}from"./chevron-right-ZAJh8zkK.js";import{F as M}from"./file-text-BfFmyrv-.js";import{M as U,D as W,P as q,C as J,B as Q}from"./pen-tool-BJpPB3eg.js";import{G as X}from"./globe-CBSgA4KP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-B2idOK5Q.js";import"./menu-ByyJuZzl.js";const Y={class:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-purple-500/20"},Z={class:"p-4 lg:p-8"},tt={class:"max-w-7xl mx-auto"},et={class:"flex items-center justify-between mb-8"},st={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20"},ot={class:"hidden lg:block overflow-x-auto"},rt={class:"w-full"},lt={class:"py-4 px-4"},nt={class:"flex items-center space-x-3"},it={class:"text-white font-semibold"},at={class:"text-purple-300 text-xs"},dt={class:"py-4 px-4"},pt={class:"text-white font-semibold"},ct={class:"py-4 px-4"},xt={class:"text-white"},ut={class:"py-4 px-4"},bt={key:0,class:"text-green-400 text-xs mt-1"},mt={key:1,class:"text-red-400 text-xs mt-1"},ft={class:"py-4 px-4"},gt={class:"text-white"},_t={class:"py-4 px-4"},ht={class:"flex items-center space-x-2"},yt=["onClick"],wt=["onClick"],vt={class:"lg:hidden space-y-4"},kt={class:"flex items-center justify-between mb-3"},Ct={class:"flex items-center space-x-3"},At={class:"text-white font-semibold"},Et={class:"opacity-75 text-xs"},Pt={class:"space-y-2 text-sm"},zt={class:"flex justify-between"},St={class:"font-semibold"},jt={class:"flex justify-between"},Bt={class:"flex justify-between"},Dt={key:0,class:"flex justify-between text-green-400"},$t={class:"font-semibold"},Ft={key:1,class:"flex justify-between text-red-400"},Nt={key:0,class:"mt-3 pt-3 border-t border-white/10"},Ht={class:"space-y-1"},Rt={class:"flex items-center justify-between"},Tt={class:"flex items-center"},Vt={class:"text-xs font-mono truncate max-w-[120px]"},Lt=["onClick"],Kt={class:"flex items-center justify-between mt-4 pt-4 border-t border-white/10"},Ot=["onClick"],Gt={key:0,class:"text-center py-12"},It={key:1,class:"flex items-center justify-between mt-6 pt-6 border-t border-purple-500/20"},Mt={class:"text-purple-300 text-sm"},Ut={class:"flex items-center space-x-2"},Wt=["disabled"],qt={class:"text-white text-sm"},Jt=["disabled"],Qt={class:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-4"},Xt={class:"bg-gradient-to-br from-purple-600/40 to-pink-600/40 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-4 shadow-2xl shadow-purple-500/20"},Yt={class:"text-center"},Zt={class:"text-2xl font-bold text-white"},te={class:"bg-gradient-to-br from-green-600/40 to-emerald-600/40 backdrop-blur-xl border border-green-500/30 rounded-2xl p-4 shadow-2xl shadow-green-500/20"},ee={class:"text-center"},se={class:"text-2xl font-bold text-white"},oe={class:"bg-gradient-to-br from-yellow-600/40 to-amber-600/40 backdrop-blur-xl border border-yellow-500/30 rounded-2xl p-4 shadow-2xl shadow-yellow-500/20"},re={class:"text-center"},le={class:"text-2xl font-bold text-white"},ne={class:"bg-gradient-to-br from-red-600/40 to-orange-600/40 backdrop-blur-xl border border-red-500/30 rounded-2xl p-4 shadow-2xl shadow-red-500/20"},ie={class:"text-center"},ae={class:"text-2xl font-bold text-white"},ve={__name:"History",props:{accounts:Object},setup(d){const c=d,B=_(()=>c.accounts.data.filter(o=>o.is_active).length),D=_(()=>c.accounts.data.filter(o=>o.is_active&&o.days_remaining<30).length),$=_(()=>c.accounts.data.filter(o=>o.is_expired).length),F=o=>({handshake:"bg-gradient-to-br from-blue-600/40 to-cyan-600/40 border-blue-500/30",telus:"bg-gradient-to-br from-green-600/40 to-emerald-600/40 border-green-500/30",imerit:"bg-gradient-to-br from-purple-600/40 to-pink-600/40 border-purple-500/30",atlas_capture:"bg-gradient-to-br from-red-600/40 to-orange-600/40 border-red-500/30",crowdgen:"bg-gradient-to-br from-yellow-600/40 to-amber-600/40 border-yellow-500/30",mindrift:"bg-gradient-to-br from-indigo-600/40 to-violet-600/40 border-indigo-500/30",dataannotation:"bg-gradient-to-br from-teal-600/40 to-cyan-600/40 border-teal-500/30",cloudworkers:"bg-gradient-to-br from-gray-600/40 to-slate-600/40 border-gray-500/30",textfactory:"bg-gradient-to-br from-rose-600/40 to-pink-600/40 border-rose-500/30"})[o]||"bg-gradient-to-br from-slate-600/40 to-slate-700/40 border-slate-500/30",y=o=>({handshake:f,telus:Q,imerit:J,atlas_capture:X,crowdgen:K,mindrift:q,dataannotation:W,cloudworkers:U,textfactory:M})[o]||f,N=o=>({handshake:"text-blue-400",telus:"text-green-400",imerit:"text-purple-400",atlas_capture:"text-red-400",crowdgen:"text-yellow-400",mindrift:"text-indigo-400",dataannotation:"text-teal-400",cloudworkers:"text-gray-400",textfactory:"text-rose-400"})[o]||"text-slate-400",w=o=>o.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()),v=o=>{switch(o){case"active":return"bg-green-500/20 text-green-400";case"pending":return"bg-yellow-500/20 text-yellow-400";case"expired":return"bg-red-500/20 text-red-400";case"cancelled":return"bg-gray-500/20 text-gray-400";default:return"bg-purple-500/20 text-purple-400"}},H=o=>{if(o.login_credentials){const e=`Email: ${o.login_credentials.email}
Password: ${o.login_credentials.password}`;k(e)}},k=async o=>{try{await navigator.clipboard.writeText(o),alert("Copied to clipboard!")}catch(e){console.error("Failed to copy:",e),alert("Failed to copy to clipboard.")}},C=async o=>{if(confirm("Are you sure you want to renew this account for KES 15,000?"))try{await m.post(`/online-work/${o}/renew`,{},{preserveScroll:!0,onSuccess:e=>{const s=e?.props?.flash||{};s.success&&(alert(s.success),m.reload())},onError:e=>{console.error("Error renewing account:",e),alert("Failed to renew account.")}})}catch(e){console.error("Error renewing account:",e),alert("An unexpected error occurred.")}},R=()=>{c.accounts.prev_page_url&&m.visit(c.accounts.prev_page_url)},T=()=>{c.accounts.next_page_url&&m.visit(c.accounts.next_page_url)};return(o,e)=>(l(),h(L,{title:"Online Work - History"},{default:x(()=>[t("div",Y,[n(i(O),{size:16,class:"text-purple-400"}),e[0]||(e[0]=t("span",null,"Online Work",-1)),e[1]||(e[1]=t("span",{class:"text-purple-400"},"â€º",-1)),e[2]||(e[2]=t("span",{class:"text-purple-300"},"Purchase History",-1))]),t("div",Z,[t("div",tt,[t("div",et,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold text-white"},"Account Purchase History",-1)),n(i(u),{href:"/online-work",class:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-2 px-4 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/50"},{default:x(()=>e[3]||(e[3]=[V(" Back to Accounts ")])),_:1})]),t("div",st,[t("div",ot,[t("table",rt,[e[5]||(e[5]=t("thead",null,[t("tr",{class:"border-b border-purple-500/20"},[t("th",{class:"text-left py-3 px-4 text-purple-300 text-sm font-semibold"},"Platform"),t("th",{class:"text-left py-3 px-4 text-purple-300 text-sm font-semibold"},"Amount"),t("th",{class:"text-left py-3 px-4 text-purple-300 text-sm font-semibold"},"Purchase Date"),t("th",{class:"text-left py-3 px-4 text-purple-300 text-sm font-semibold"},"Status"),t("th",{class:"text-left py-3 px-4 text-purple-300 text-sm font-semibold"},"Expires"),t("th",{class:"text-left py-3 px-4 text-purple-300 text-sm font-semibold"},"Actions")])],-1)),t("tbody",null,[(l(!0),a(A,null,E(d.accounts.data,s=>(l(),a("tr",{key:s.id,class:"border-b border-purple-500/10 hover:bg-purple-500/5 transition-colors"},[t("td",lt,[t("div",nt,[(l(),h(P(y(s.platform)),{size:20,class:b(N(s.platform))},null,8,["class"])),t("div",null,[t("p",it,r(s.platform_name),1),t("p",at,r(w(s.platform)),1)])])]),t("td",dt,[t("p",pt,"KES "+r(s.amount.toLocaleString()),1)]),t("td",ct,[t("p",xt,r(s.purchased_at),1)]),t("td",ut,[t("span",{class:b([v(s.status),"px-3 py-1 rounded-full text-xs font-semibold"])},r(s.status),3),s.is_active?(l(),a("p",bt,r(s.days_remaining)+" days remaining ",1)):p("",!0),s.is_expired?(l(),a("p",mt," Expired ")):p("",!0)]),t("td",ft,[t("p",gt,r(s.expires_at||"N/A"),1)]),t("td",_t,[t("div",ht,[n(i(u),{href:"/online-work/"+s.id,class:"text-blue-400 hover:text-blue-300 transition-colors p-2 hover:bg-blue-500/10 rounded-lg",title:"View Details"},{default:x(()=>[n(i(z),{size:16})]),_:2},1032,["href"]),s.is_active&&s.days_remaining<30?(l(),a("button",{key:0,onClick:g=>C(s.id),class:"text-green-400 hover:text-green-300 transition-colors p-2 hover:bg-green-500/10 rounded-lg",title:"Renew Account"},[n(i(S),{size:16})],8,yt)):p("",!0),s.login_credentials?(l(),a("button",{key:1,onClick:g=>H(s),class:"text-purple-400 hover:text-purple-300 transition-colors p-2 hover:bg-purple-500/10 rounded-lg",title:"Copy Credentials"},[n(i(j),{size:16})],8,wt)):p("",!0)])])]))),128))])])]),t("div",vt,[(l(!0),a(A,null,E(d.accounts.data,s=>(l(),a("div",{key:s.id,class:b([F(s.platform),"border rounded-xl p-4"])},[t("div",kt,[t("div",Ct,[(l(),h(P(y(s.platform)),{size:20})),t("div",null,[t("p",At,r(s.platform_name),1),t("p",Et,r(w(s.platform)),1)])]),t("span",{class:b([v(s.status),"px-3 py-1 rounded-full text-xs font-semibold"])},r(s.status),3)]),t("div",Pt,[t("div",zt,[e[6]||(e[6]=t("span",{class:"opacity-75"},"Amount:",-1)),t("span",St,"KES "+r(s.amount.toLocaleString()),1)]),t("div",jt,[e[7]||(e[7]=t("span",{class:"opacity-75"},"Purchased:",-1)),t("span",null,r(s.purchased_at),1)]),t("div",Bt,[e[8]||(e[8]=t("span",{class:"opacity-75"},"Expires:",-1)),t("span",null,r(s.expires_at||"N/A"),1)]),s.is_active?(l(),a("div",Dt,[e[9]||(e[9]=t("span",null,"Days Remaining:",-1)),t("span",$t,r(s.days_remaining)+" days",1)])):p("",!0),s.is_expired?(l(),a("div",Ft,e[10]||(e[10]=[t("span",null,"Status:",-1),t("span",{class:"font-semibold"},"Expired",-1)]))):p("",!0)]),s.login_credentials?(l(),a("div",Nt,[e[12]||(e[12]=t("p",{class:"text-xs opacity-75 mb-1"},"Account Credentials:",-1)),t("div",Ht,[t("div",Rt,[e[11]||(e[11]=t("span",{class:"text-xs opacity-75"},"Email:",-1)),t("div",Tt,[t("span",Vt,r(s.login_credentials.email),1),t("button",{onClick:g=>k(s.login_credentials.email),class:"text-purple-400 hover:text-purple-300 ml-1"},[n(i(j),{size:12})],8,Lt)])])])])):p("",!0),t("div",Kt,[n(i(u),{href:"/online-work/"+s.id,class:"text-blue-400 hover:text-blue-300 text-sm flex items-center space-x-1"},{default:x(()=>[n(i(z),{size:14}),e[13]||(e[13]=t("span",null,"Details",-1))]),_:2},1032,["href"]),s.is_active&&s.days_remaining<30?(l(),a("button",{key:0,onClick:g=>C(s.id),class:"text-green-400 hover:text-green-300 text-sm flex items-center space-x-1"},[n(i(S),{size:14}),e[14]||(e[14]=t("span",null,"Renew",-1))],8,Ot)):p("",!0)])],2))),128))]),d.accounts.data.length===0?(l(),a("div",Gt,[n(i(f),{size:64,class:"mx-auto text-purple-400 mb-4 opacity-50"}),e[16]||(e[16]=t("p",{class:"text-purple-300 text-lg mb-2"},"No account purchases yet",-1)),e[17]||(e[17]=t("p",{class:"text-purple-400 text-sm mb-6"},"Purchase your first online work account to get started",-1)),n(i(u),{href:"/online-work",class:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg shadow-purple-500/50 inline-flex items-center space-x-2"},{default:x(()=>[n(i(f),{size:18}),e[15]||(e[15]=t("span",null,"View Accounts",-1))]),_:1})])):p("",!0),d.accounts.total>0?(l(),a("div",It,[t("p",Mt," Showing "+r(d.accounts.from)+" to "+r(d.accounts.to)+" of "+r(d.accounts.total)+" accounts ",1),t("div",Ut,[t("button",{onClick:R,disabled:!d.accounts.prev_page_url,class:"bg-black/30 border border-purple-500/30 text-white px-3 py-2 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:border-purple-500 transition-colors"},[n(i(G),{size:16})],8,Wt),t("span",qt," Page "+r(d.accounts.current_page)+" of "+r(d.accounts.last_page),1),t("button",{onClick:T,disabled:!d.accounts.next_page_url,class:"bg-black/30 border border-purple-500/30 text-white px-3 py-2 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:border-purple-500 transition-colors"},[n(i(I),{size:16})],8,Jt)])])):p("",!0)]),t("div",Qt,[t("div",Xt,[t("div",Yt,[e[18]||(e[18]=t("p",{class:"text-purple-300 text-sm mb-1"},"Total Purchases",-1)),t("p",Zt,r(d.accounts.total),1)])]),t("div",te,[t("div",ee,[e[19]||(e[19]=t("p",{class:"text-green-300 text-sm mb-1"},"Active Accounts",-1)),t("p",se,r(B.value),1)])]),t("div",oe,[t("div",re,[e[20]||(e[20]=t("p",{class:"text-yellow-300 text-sm mb-1"},"Expiring Soon",-1)),t("p",le,r(D.value),1)])]),t("div",ne,[t("div",ie,[e[21]||(e[21]=t("p",{class:"text-red-300 text-sm mb-1"},"Expired",-1)),t("p",ae,r($.value),1)])])])])])]),_:1}))}};export{ve as default};
