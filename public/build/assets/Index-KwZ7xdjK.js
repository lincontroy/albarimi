import{r as y,c as L,y as I,E as W,i as V,a as N,o as r,w as b,b as e,d as l,u as o,e as a,f as x,t as n,p,F as m,h as v,n as B,C as Y,m as F,D as M}from"./app-CySw4lLa.js";import{W as q,C as z,_ as J}from"./DashboardLayout-BwZdqBzn.js";import{G as A}from"./globe-BR-FariS.js";import{L as E}from"./loader-circle-t5kkk-LA.js";import{C as Q}from"./circle-alert-BTfAk1vc.js";import{A as P}from"./arrow-right-CxBkcM6F.js";import{S as T}from"./shopping-cart-Be72E6Pk.js";import{C as H}from"./copy-BPm9N5kq.js";import{T as $}from"./tag--Jx1Nxqt.js";import{C as X}from"./clock-B6rBuw6T.js";import{C as Z}from"./calendar-CZJ78yBs.js";import{C as ee}from"./circle-check-big-RJWez3ij.js";import{H as te}from"./history-DOPnEo8Y.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-BJb2igB9.js";import"./eye-D21h4GYO.js";import"./menu-2oA-EL44.js";const se={class:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-blue-500/20"},oe={class:"p-4 lg:p-8"},le={class:"max-w-7xl mx-auto"},re={key:0,class:"text-center py-12"},ae={key:1,class:"text-center py-12"},ie={class:"bg-gradient-to-br from-red-600/20 to-orange-600/20 backdrop-blur-xl border border-red-500/30 rounded-2xl p-8"},ne={key:2},de={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},ue={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20"},ce={class:"flex items-center space-x-3 mb-3"},be={class:"text-3xl font-bold text-purple-400 mb-2"},pe={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20"},xe={class:"flex items-center space-x-3 mb-3"},me={class:"text-3xl font-bold text-white mb-2"},ge={class:"flex items-center space-x-3 mb-3"},fe={key:0,class:"mb-8"},ve={class:"flex items-center justify-between mb-4"},ye={class:"text-xl font-bold text-white flex items-center space-x-2"},he={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},_e={class:"flex items-center justify-between mb-3"},we={class:"flex items-center space-x-2"},Ce={class:"font-bold text-white"},ke={class:"mb-3"},Ve={class:"flex items-center justify-between bg-black/30 rounded-lg p-2"},ze={class:"text-white font-mono text-sm"},Ae=["onClick"],Te={class:"space-y-1"},Se={class:"flex justify-between"},je={class:"text-sm font-semibold"},Le={class:"flex justify-between"},Ne={class:"text-sm font-semibold"},Be={key:0,class:"flex justify-between"},Fe={class:"text-sm font-semibold"},Me={class:"flex items-center justify-between mb-4"},Ee={class:"text-xl font-bold text-white flex items-center space-x-2"},Pe={class:"flex space-x-2"},He=["value"],$e=["value"],De={key:0,class:"text-center py-4"},Ue={key:1,class:"text-center py-8 bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl"},Re={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ke={class:"flex items-center justify-between mb-4"},Oe={class:"flex items-center space-x-2"},Ge={class:"text-lg font-bold text-white"},Ie={class:"mb-4"},We={class:"flex items-center justify-between mb-3"},Ye={class:"text-lg font-bold text-white"},qe={class:"text-right"},Je={class:"text-xl font-bold text-green-400"},Qe={class:"mb-3"},Xe={class:"flex items-center justify-between bg-black/30 rounded-xl p-3"},Ze={class:"text-white font-mono text-sm"},et=["onClick"],tt={class:"space-y-2 mb-4"},st={key:0,class:"flex items-center space-x-2"},ot={class:"text-sm text-blue-300"},lt={key:1,class:"flex items-center space-x-2"},rt={class:"text-sm text-orange-300"},at={class:"mb-4"},it={class:"space-y-1"},nt={class:"text-green-100"},dt={key:0,class:"text-xs text-green-300 pl-6"},ut={key:3,class:"mt-6"},ct={class:"flex items-center justify-center space-x-2"},bt=["innerHTML"],pt={key:1,class:"bg-slate-800/30 text-slate-500 cursor-not-allowed px-4 py-2 rounded-lg"},xt=["innerHTML"],mt={class:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4"},gt={class:"flex items-center space-x-3"},ft={class:"flex items-center space-x-3"},vt={class:"flex items-center space-x-3"},Et={__name:"Index",props:{availableCodes:{type:Object,default:()=>({data:[],links:[]})},myCodes:{type:Array,default:()=>[]},visaTypes:{type:Object,default:()=>({})},countries:{type:Object,default:()=>({})},userBalance:{type:[Number,String],default:0},selectedVisaType:{type:String,default:""},selectedCountry:{type:String,default:""}},setup(u){const c=u,g=y(c.selectedVisaType||""),f=y(c.selectedCountry||""),D=y(!1),_=y(!1),h=y(!1);L(()=>{const i=parseFloat(c.userBalance)||0;return C(i)});const w=L(()=>c.availableCodes?.links?c.availableCodes.links.filter(i=>i!==null):[]),C=i=>(parseFloat(i)||0).toLocaleString("en-KE",{minimumFractionDigits:0,maximumFractionDigits:0}),U=(i="gray")=>{const t={green:"bg-gradient-to-br from-green-600/20 to-emerald-600/20 border-green-500/30",blue:"bg-gradient-to-br from-blue-600/20 to-cyan-600/20 border-blue-500/30",purple:"bg-gradient-to-br from-purple-600/20 to-pink-600/20 border-purple-500/30",red:"bg-gradient-to-br from-red-600/20 to-orange-600/20 border-red-500/30",gray:"bg-gradient-to-br from-slate-600/20 to-slate-700/20 border-slate-500/30"};return t[i]||t.gray},R=(i="gray")=>{const t={green:"rgba(34, 197, 94, 0.2)",blue:"rgba(59, 130, 246, 0.2)",purple:"rgba(168, 85, 247, 0.2)",red:"rgba(239, 68, 68, 0.2)",gray:"rgba(100, 116, 139, 0.2)"};return t[i]||t.gray},K=(i="gray")=>{const t={green:"#4ade80",blue:"#60a5fa",purple:"#c084fc",red:"#f87171",gray:"#94a3b8"};return t[i]||t.gray},S=async i=>{if(i)try{await navigator.clipboard.writeText(i),alert("Visa code copied to clipboard!")}catch(t){console.error("Failed to copy:",t),alert("Failed to copy to clipboard.")}},k=()=>{h.value=!0;const i={};g.value&&(i.visa_type=g.value),f.value&&(i.country=f.value),V.get("/visa-codes",i,{preserveState:!0,preserveScroll:!0,onFinish:()=>{h.value=!1},onError:()=>{h.value=!1,_.value=!0}})},O=()=>{g.value="",f.value="",k()},j=()=>{_.value=!1,V.reload()};return I(()=>{console.log("VisaCodes Index mounted"),console.log("Available codes:",c.availableCodes),console.log("Available links:",c.availableCodes?.links),(!c.availableCodes||!c.visaTypes)&&(console.warn("Missing props, attempting to reload"),j())}),W(()=>V.url,()=>{if(typeof window<"u"){const i=new URLSearchParams(window.location.search);g.value=i.get("visa_type")||"",f.value=i.get("country")||""}},{immediate:!0}),(i,t)=>(r(),N(J,{title:"Visa Codes"},{default:b(()=>[e("div",se,[l(o(A),{size:16,class:"text-blue-400"}),t[2]||(t[2]=e("span",null,"Visa Codes",-1)),t[3]||(t[3]=e("span",{class:"text-blue-400"},"â€º",-1)),t[4]||(t[4]=e("span",{class:"text-blue-300"},"Available Codes",-1))]),e("div",oe,[e("div",le,[D.value?(r(),a("div",re,[l(o(E),{class:"animate-spin mx-auto text-blue-400",size:48}),t[5]||(t[5]=e("p",{class:"text-blue-300 mt-4"},"Loading visa codes...",-1))])):_.value?(r(),a("div",ae,[e("div",ie,[l(o(Q),{size:48,class:"mx-auto text-red-400 mb-4"}),t[6]||(t[6]=e("h4",{class:"text-xl font-bold text-white mb-2"},"Unable to Load Visa Codes",-1)),t[7]||(t[7]=e("p",{class:"text-red-300 mb-4"},"There was an error loading the visa codes. Please try again.",-1)),e("button",{onClick:j,class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white font-bold py-2 px-6 rounded-xl transition-all duration-200"}," Retry ")])])):(r(),a("div",ne,[e("div",de,[e("div",ue,[e("div",ce,[l(o(q),{size:24,class:"text-purple-400"}),t[8]||(t[8]=e("h3",{class:"text-lg font-bold text-white"},"Your Balance",-1))]),e("p",be,"KES "+n(C(u.userBalance)),1),t[9]||(t[9]=e("p",{class:"text-sm text-purple-300"},"Available for visa code purchases",-1))]),e("div",pe,[e("div",xe,[l(o(z),{size:24,class:"text-blue-400"}),t[10]||(t[10]=e("h3",{class:"text-lg font-bold text-white"},"My Visa Codes",-1))]),e("p",me,n(u.myCodes.length),1),l(o(p),{href:"/visa-codes/my-codes",class:"text-sm text-blue-400 hover:text-blue-300 flex items-center space-x-1"},{default:b(()=>[t[11]||(t[11]=e("span",null,"View all",-1)),l(o(P),{size:14})]),_:1})]),l(o(p),{href:"/visa-codes/purchase",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20 hover:border-green-500 transition-all duration-200 group"},{default:b(()=>[e("div",ge,[l(o(T),{size:24,class:"text-green-400 group-hover:text-green-300"}),t[12]||(t[12]=e("h3",{class:"text-lg font-bold text-white group-hover:text-green-300"},"Purchase Visa Codes",-1))]),t[13]||(t[13]=e("p",{class:"text-sm text-green-400 group-hover:text-green-300"},"Browse and purchase visa codes",-1))]),_:1})]),u.myCodes.length>0?(r(),a("div",fe,[e("div",ve,[e("h3",ye,[l(o(z),{size:20}),t[14]||(t[14]=e("span",null,"My Recent Visa Codes",-1))]),l(o(p),{href:"/visa-codes/my-codes",class:"text-blue-400 hover:text-blue-300 text-sm flex items-center space-x-1"},{default:b(()=>[t[15]||(t[15]=e("span",null,"View All",-1)),l(o(P),{size:14})]),_:1})]),e("div",he,[(r(!0),a(m,null,v(u.myCodes,s=>(r(),a("div",{key:s.id,class:B([U(s.status_badge?.color),"backdrop-blur-xl border rounded-xl p-4"])},[e("div",_e,[e("div",we,[l(o(A),{size:16}),e("span",Ce,n(s.country_name||"N/A"),1)]),s.status_badge?(r(),a("span",{key:0,class:"px-2 py-1 rounded-full text-xs font-semibold",style:Y(`background-color: ${R(s.status_badge.color)}; color: ${K(s.status_badge.color)}`)},n(s.status_badge.text||"Unknown"),5)):x("",!0)]),e("div",ke,[t[16]||(t[16]=e("p",{class:"text-sm opacity-75 mb-1"},"Visa Code",-1)),e("div",Ve,[e("code",ze,n(s.code||"N/A"),1),e("button",{onClick:d=>S(s.code),class:"text-blue-400 hover:text-blue-300"},[l(o(H),{size:14})],8,Ae)])]),e("div",Te,[e("div",Se,[t[17]||(t[17]=e("span",{class:"text-sm opacity-75"},"Type",-1)),e("span",je,n(s.visa_name||"N/A"),1)]),e("div",Le,[t[18]||(t[18]=e("span",{class:"text-sm opacity-75"},"Purchased",-1)),e("span",Ne,n(s.purchased_at||"N/A"),1)]),s.expires_at?(r(),a("div",Be,[t[19]||(t[19]=e("span",{class:"text-sm opacity-75"},"Expires",-1)),e("span",Fe,n(s.expires_at),1)])):x("",!0)])],2))),128))])])):x("",!0),e("div",null,[e("div",Me,[e("h3",Ee,[l(o($),{size:20}),t[20]||(t[20]=e("span",null,"Available Visa Codes",-1))]),e("div",Pe,[F(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),onChange:k,class:"bg-black/30 border border-blue-500/30 text-white rounded-lg px-3 py-1 text-sm focus:outline-none focus:border-blue-400"},[t[21]||(t[21]=e("option",{value:""},"All Visa Types",-1)),(r(!0),a(m,null,v(u.visaTypes,(s,d)=>(r(),a("option",{key:d,value:d},n(s.name||d),9,He))),128))],544),[[M,g.value]]),F(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),onChange:k,class:"bg-black/30 border border-blue-500/30 text-white rounded-lg px-3 py-1 text-sm focus:outline-none focus:border-blue-400"},[t[22]||(t[22]=e("option",{value:""},"All Countries",-1)),(r(!0),a(m,null,v(u.countries,(s,d)=>(r(),a("option",{key:d,value:d},n(s||d),9,$e))),128))],544),[[M,f.value]])])]),h.value?(r(),a("div",De,[l(o(E),{class:"animate-spin mx-auto text-blue-400",size:24})])):u.availableCodes.data.length===0?(r(),a("div",Ue,[l(o($),{size:48,class:"mx-auto text-blue-400 mb-3"}),t[23]||(t[23]=e("h4",{class:"text-lg font-bold text-white mb-2"},"No Visa Codes Available",-1)),t[24]||(t[24]=e("p",{class:"text-blue-300"},"Check back later for new visa code releases.",-1)),e("div",{class:"mt-4"},[e("button",{onClick:O,class:"text-blue-400 hover:text-blue-300 text-sm"}," Clear filters ")])])):(r(),a("div",Re,[(r(!0),a(m,null,v(u.availableCodes.data,s=>(r(),a("div",{key:s.id,class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20 hover:border-green-500 transition-all duration-200"},[e("div",Ke,[e("div",Oe,[l(o(A),{size:20,class:"text-green-400"}),e("h4",Ge,n(s.country_name||"N/A"),1)]),t[25]||(t[25]=e("span",{class:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-xs font-semibold"}," Available ",-1))]),e("div",Ie,[e("div",We,[e("div",null,[t[26]||(t[26]=e("p",{class:"text-sm opacity-75"},"Visa Type",-1)),e("p",Ye,n(s.visa_name||"N/A"),1)]),e("div",qe,[t[27]||(t[27]=e("p",{class:"text-sm opacity-75"},"Price",-1)),e("p",Je,"KES "+n(C(s.amount||0)),1)])]),e("div",Qe,[t[28]||(t[28]=e("p",{class:"text-sm opacity-75 mb-1"},"Visa Code",-1)),e("div",Xe,[e("code",Ze,n(s.code||"N/A"),1),e("button",{onClick:d=>S(s.code),class:"text-blue-400 hover:text-blue-300"},[l(o(H),{size:16})],8,et)])]),e("div",tt,[s.duration?(r(),a("div",st,[l(o(X),{size:14,class:"text-blue-400"}),e("span",ot,n(s.duration),1)])):x("",!0),s.days_remaining?(r(),a("div",lt,[l(o(Z),{size:14,class:"text-orange-400"}),e("span",rt,"Expires in "+n(s.days_remaining)+" days",1)])):x("",!0)]),e("div",at,[t[29]||(t[29]=e("p",{class:"text-sm opacity-75 mb-2"},"Features:",-1)),e("ul",it,[(r(!0),a(m,null,v((s.features||[]).slice(0,3),(d,G)=>(r(),a("li",{key:G,class:"flex items-start space-x-2 text-sm"},[l(o(ee),{size:14,class:"text-green-400 mt-0.5 flex-shrink-0"}),e("span",nt,n(d),1)]))),128)),s.features&&s.features.length>3?(r(),a("li",dt," +"+n(s.features.length-3)+" more features ",1)):x("",!0)])])]),l(o(p),{href:`/visa-codes/purchase?visa_type=${s.visa_type||""}&country=${s.country||""}`,class:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 shadow-lg shadow-green-500/50 flex items-center justify-center space-x-2"},{default:b(()=>[l(o(T),{size:18}),t[30]||(t[30]=e("span",null,"Purchase Now",-1))]),_:2},1032,["href"])]))),128))])),w.value&&w.value.length>0?(r(),a("div",ut,[e("div",ct,[(r(!0),a(m,null,v(w.value,s=>(r(),a(m,{key:s.label},[s.url?(r(),N(o(p),{key:0,href:s.url,class:B([{"bg-blue-600 text-white":s.active,"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50":!s.active},"px-4 py-2 rounded-lg transition-all duration-200"]),"preserve-scroll":""},{default:b(()=>[e("span",{innerHTML:s.label},null,8,bt)]),_:2},1032,["href","class"])):(r(),a("span",pt,[e("span",{innerHTML:s.label},null,8,xt)]))],64))),128))])])):x("",!0)]),e("div",mt,[l(o(p),{href:"/visa-codes/purchase",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20 hover:border-green-500 transition-all duration-200 group"},{default:b(()=>[e("div",gt,[l(o(T),{size:24,class:"text-green-400 group-hover:text-green-300"}),t[31]||(t[31]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-green-300"},"Purchase Visa Codes"),e("p",{class:"text-green-400 text-sm"},"Browse and buy visa codes")],-1))])]),_:1}),l(o(p),{href:"/visa-codes/my-codes",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20 hover:border-blue-500 transition-all duration-200 group"},{default:b(()=>[e("div",ft,[l(o(z),{size:24,class:"text-blue-400 group-hover:text-blue-300"}),t[32]||(t[32]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-blue-300"},"My Visa Codes"),e("p",{class:"text-blue-400 text-sm"},"View your purchased codes")],-1))])]),_:1}),l(o(p),{href:"/visa-codes/history",class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20 hover:border-purple-500 transition-all duration-200 group"},{default:b(()=>[e("div",vt,[l(o(te),{size:24,class:"text-purple-400 group-hover:text-purple-300"}),t[33]||(t[33]=e("div",null,[e("h4",{class:"text-white font-bold group-hover:text-purple-300"},"Purchase History"),e("p",{class:"text-purple-400 text-sm"},"View all your transactions")],-1))])]),_:1})])]))])])]),_:1}))}};export{Et as default};
