import{r as B,A as M,c as _,a as x,o as i,w as k,b as e,d as n,u as r,l as P,g as c,m as g,v as f,t as a,e as b,F as S,h as C,n as D,x as V,f as X,p as $,i as j}from"./app-D6j1FQBi.js";import{W as L,D as q,C as v,_ as U}from"./DashboardLayout-BYlz_9qN.js";import{P as W}from"./phone-DnqbI2_K.js";import{B as Y}from"./building-D9boiQKA.js";import{C as T}from"./circle-alert-BKND_jVk.js";import{I}from"./info-IH9MnLoR.js";import{S as E}from"./shield-eNzR9XvW.js";import{L as G}from"./loader-circle-C7QWmB1k.js";import{C as w}from"./circle-check-big-UPhiIdIb.js";import"./createLucideIcon-wmvZfjIg.js";import"./eye-CBnRukzz.js";import"./menu-ByRzepzI.js";const H={class:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-green-500/20"},J={class:"p-4 lg:p-8"},O={class:"max-w-4xl mx-auto"},Q={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},R={class:"lg:col-span-2"},Z={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl shadow-green-500/20"},ee={class:"mb-6"},te={class:"block text-sm font-medium text-green-300 mb-2"},se={class:"relative"},oe=["min","max"],re={class:"flex justify-between mt-2"},ne={class:"text-xs text-green-400"},le={class:"text-xs text-green-400"},ae={class:"grid grid-cols-3 gap-2 mt-3"},ie=["onClick"],de={class:"mb-6"},ue={class:"block text-sm font-medium text-green-300 mb-2"},me={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},pe=["onClick"],ce={class:"font-bold"},be={class:"mb-6"},xe={key:0,class:"space-y-4"},ge={class:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-sm text-yellow-300"},fe={key:1,class:"space-y-4"},ye={class:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg text-sm text-blue-300"},_e={key:2,class:"space-y-4"},ve={class:"p-3 bg-purple-500/10 border border-purple-500/30 rounded-lg text-sm text-purple-300"},we={class:"flex space-x-3"},he=["disabled"],ke={class:"lg:col-span-1"},Se={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20 mb-6"},Ce={class:"space-y-3"},De={class:"flex justify-between items-center"},Ee={class:"font-bold text-white"},Fe={class:"flex justify-between items-center"},Ke={class:"font-bold text-red-400"},Ne={class:"pt-3 border-t border-blue-500/20"},ze={class:"flex justify-between items-center mb-2"},Ae={class:"font-bold text-green-400"},Be={class:"flex justify-between items-center"},Me={class:"font-bold text-white"},Pe={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 shadow-2xl shadow-purple-500/20 mb-6"},Ve={class:"text-center"},Xe={class:"text-3xl font-bold text-white mb-2"},$e={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-yellow-500/30 rounded-2xl p-6 shadow-2xl shadow-yellow-500/20"},je={class:"text-lg font-bold text-white mb-4 flex items-center space-x-2"},Le={class:"space-y-2 text-sm text-blue-200"},qe={class:"flex items-start space-x-2"},Ue={class:"flex items-start space-x-2"},We={class:"flex items-start space-x-2"},st={__name:"Deposit",props:{balance:{type:[Number,String],default:0},min_deposit:{type:Number,default:100},max_deposit:{type:Number,default:5e4},deposit_fee_percentage:{type:Number,default:1.5}},setup(d){const u=d,m=B(!1),F=[500,1e3,2e3,5e3,1e4,2e4],K=[{id:"mpesa",name:"M-Pesa",icon:W},{id:"bank",name:"Bank Transfer",icon:Y},{id:"card",name:"Credit/Debit Card",icon:v}],s=M({amount:1e3,payment_method:"mpesa",phone_number:"",account_number:"",card_number:""}),y=_(()=>(parseFloat(s.amount)||0)*(u.deposit_fee_percentage/100)),h=_(()=>(parseFloat(s.amount)||0)-y.value),N=_(()=>parseFloat(u.balance)+h.value),l=p=>(parseFloat(p)||0).toLocaleString("en-KE",{minimumFractionDigits:0,maximumFractionDigits:0}),z=async()=>{if(!s.amount||s.amount<u.min_deposit||s.amount>u.max_deposit){alert(`Deposit amount must be between KES ${u.min_deposit.toLocaleString()} and KES ${u.max_deposit.toLocaleString()}`);return}if(!s.payment_method){alert("Please select a payment method");return}const p=`Are you sure you want to deposit KES ${l(s.amount)} via ${s.payment_method.toUpperCase()}? A fee of KES ${l(y.value)} will be charged.`;if(confirm(p)){m.value=!0;try{await j.post("/wallet/deposit",s,{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Deposit error:",t),alert("Failed to process deposit. Please check the form and try again."),m.value=!1}})}catch(t){console.error("Deposit error:",t),alert("An unexpected error occurred. Please try again."),m.value=!1}}};return(p,t)=>(i(),x(U,{title:"Deposit Funds"},{default:k(()=>[e("div",H,[n(r(L),{size:16,class:"text-green-400"}),t[4]||(t[4]=e("span",null,"Wallet",-1)),t[5]||(t[5]=e("span",{class:"text-green-400"},"â€º",-1)),t[6]||(t[6]=e("span",{class:"text-green-300"},"Deposit Funds",-1))]),e("div",J,[e("div",O,[t[30]||(t[30]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl lg:text-3xl font-bold text-white mb-2"},"Deposit Funds"),e("p",{class:"text-green-300"},"Add funds to your wallet using various payment methods")],-1)),e("div",Q,[e("div",R,[e("div",Z,[t[18]||(t[18]=e("h3",{class:"text-xl font-bold text-white mb-6"},"Deposit Form",-1)),e("form",{onSubmit:P(z,["prevent"])},[e("div",ee,[e("label",te,[n(r(q),{size:16,class:"inline mr-2"}),t[7]||(t[7]=c(" Deposit Amount (KES) "))]),e("div",se,[t[8]||(t[8]=e("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-green-400"},"KES",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.amount=o),type:"number",min:d.min_deposit,max:d.max_deposit,required:"",class:"w-full bg-black/30 border border-green-500/30 text-white rounded-xl pl-16 pr-4 py-3 focus:outline-none focus:border-green-400",placeholder:"Enter amount"},null,8,oe),[[f,s.amount]])]),e("div",re,[e("span",ne,"Min: KES "+a(l(d.min_deposit)),1),e("span",le,"Max: KES "+a(l(d.max_deposit)),1)]),e("div",ae,[(i(),b(S,null,C(F,o=>e("button",{key:o,type:"button",onClick:A=>s.amount=o,class:D([s.amount===o?"bg-green-600 text-white":"bg-black/30 text-green-300","border border-green-500/30 rounded-lg py-2 text-center text-sm transition-all duration-200"])}," KES "+a(l(o)),11,ie)),64))])]),e("div",de,[e("label",ue,[n(r(v),{size:16,class:"inline mr-2"}),t[9]||(t[9]=c(" Payment Method "))]),e("div",me,[(i(),b(S,null,C(K,o=>e("button",{key:o.id,type:"button",onClick:A=>s.payment_method=o.id,class:D([s.payment_method===o.id?"bg-green-600 text-white border-green-500":"bg-black/30 text-green-300 border-green-500/30","border rounded-lg p-4 text-center transition-all duration-200"])},[(i(),x(V(o.icon),{size:24,class:"mx-auto mb-2"})),e("div",ce,a(o.name),1)],10,pe)),64))])]),e("div",be,[s.payment_method==="mpesa"?(i(),b("div",xe,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-green-300 mb-2"}," Phone Number ",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.phone_number=o),type:"tel",required:"",class:"w-full bg-black/30 border border-green-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-green-400",placeholder:"07XXXXXXXX"},null,512),[[f,s.phone_number]])]),e("div",ge,[n(r(T),{size:16,class:"inline mr-1"}),t[11]||(t[11]=c(" You will receive a prompt on your phone to confirm the payment "))])])):s.payment_method==="bank"?(i(),b("div",fe,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-green-300 mb-2"}," Account Number ",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.account_number=o),type:"text",required:"",class:"w-full bg-black/30 border border-green-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-green-400",placeholder:"Enter account number"},null,512),[[f,s.account_number]])]),e("div",ye,[n(r(I),{size:16,class:"inline mr-1"}),t[13]||(t[13]=c(" Bank transfers may take 1-2 business days to process "))])])):s.payment_method==="card"?(i(),b("div",_e,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-green-300 mb-2"}," Card Number ",-1)),g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.card_number=o),type:"text",required:"",class:"w-full bg-black/30 border border-green-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-green-400",placeholder:"1234 5678 9012 3456"},null,512),[[f,s.card_number]])]),t[16]||(t[16]=e("div",{class:"grid grid-cols-2 gap-4"},[e("div",null,[e("label",{class:"block text-sm font-medium text-green-300 mb-2"}," Expiry Date "),e("input",{type:"text",class:"w-full bg-black/30 border border-green-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-green-400",placeholder:"MM/YY"})]),e("div",null,[e("label",{class:"block text-sm font-medium text-green-300 mb-2"}," CVV "),e("input",{type:"text",class:"w-full bg-black/30 border border-green-500/30 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-green-400",placeholder:"123"})])],-1)),e("div",ve,[n(r(E),{size:16,class:"inline mr-1"}),t[15]||(t[15]=c(" Your card details are encrypted and secure "))])])):X("",!0)]),e("div",we,[e("button",{type:"submit",disabled:m.value||!s.payment_method,class:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2"},[m.value?(i(),x(r(G),{key:0,class:"animate-spin",size:20})):(i(),x(r(v),{key:1,size:20})),e("span",null,a(m.value?"Processing...":"Deposit Now"),1)],8,he),n(r($),{href:"/wallet",class:"flex-1 border border-green-500/30 text-green-400 hover:bg-green-500/20 py-3 px-6 rounded-lg text-center transition-all duration-200"},{default:k(()=>t[17]||(t[17]=[c(" Cancel ")])),_:1})])],32)])]),e("div",ke,[e("div",Se,[t[23]||(t[23]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Deposit Summary",-1)),e("div",Ce,[e("div",De,[t[19]||(t[19]=e("span",{class:"text-sm text-blue-300"},"Deposit Amount",-1)),e("span",Ee,"KES "+a(l(s.amount||0)),1)]),e("div",Fe,[t[20]||(t[20]=e("span",{class:"text-sm text-blue-300"},"Processing Fee (1.5%)",-1)),e("span",Ke,"- KES "+a(l(y.value)),1)]),e("div",Ne,[e("div",ze,[t[21]||(t[21]=e("span",{class:"text-sm text-blue-300"},"Net Deposit",-1)),e("span",Ae,"KES "+a(l(h.value)),1)]),e("div",Be,[t[22]||(t[22]=e("span",{class:"text-sm text-blue-300"},"New Balance",-1)),e("span",Me,"KES "+a(l(N.value)),1)])])])]),e("div",Pe,[t[25]||(t[25]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Current Balance",-1)),e("div",Ve,[e("div",Xe,"KES "+a(l(d.balance)),1),t[24]||(t[24]=e("p",{class:"text-sm text-purple-300"},"Available for use",-1))])]),e("div",$e,[e("h3",je,[n(r(E),{size:20,class:"text-yellow-400"}),t[26]||(t[26]=e("span",null,"Security Notice",-1))]),e("ul",Le,[e("li",qe,[n(r(w),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[27]||(t[27]=e("span",null,"All transactions are encrypted and secure",-1))]),e("li",Ue,[n(r(w),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[28]||(t[28]=e("span",null,"We never store your card details",-1))]),e("li",We,[n(r(w),{size:14,class:"text-green-400 flex-shrink-0 mt-0.5"}),t[29]||(t[29]=e("span",null,"Deposits are processed instantly",-1))])])])])])])])]),_:1}))}};export{st as default};
