import{c as m,a as _,o as r,w as u,b as t,d as i,u as l,p,g as I,e as n,f as c,F as C,h as P,x as z,n as b,t as o,i as f}from"./app-B44wr4c_.js";import{P as A,_ as K}from"./DashboardLayout-C2D5VWEJ.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{H as R}from"./history-wG2eLW_O.js";import{E}from"./eye-By03grgf.js";import{c as M}from"./createLucideIcon-CNz6d2hL.js";import{C as S}from"./copy-DDqjijfb.js";import{A as j}from"./award-BGpVpqTJ.js";import{C as O,a as U}from"./chevron-right-Bq5VDIte.js";import{S as q}from"./shield-check-C_Gf9J0E.js";import{K as G}from"./key-C5UQ-6wI.js";import"./menu-BwH3VRfh.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=M("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),J={class:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 backdrop-blur-sm text-white px-4 lg:px-8 py-3 flex items-center space-x-2 text-sm border-b border-blue-500/20"},Q={class:"p-4 lg:p-8"},W={class:"max-w-7xl mx-auto"},X={class:"flex items-center justify-between mb-8"},Y={class:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 shadow-2xl shadow-blue-500/20"},Z={class:"hidden lg:block overflow-x-auto"},tt={class:"w-full"},et={class:"py-4 px-4"},st={class:"flex items-center space-x-3"},ot={class:"text-white font-semibold"},at={class:"text-blue-300 text-xs"},rt={class:"py-4 px-4"},it={class:"text-white font-semibold"},lt={class:"py-4 px-4"},nt={class:"text-white"},dt={class:"py-4 px-4"},ct={key:0,class:"text-green-400 text-xs mt-1"},xt={key:1,class:"text-red-400 text-xs mt-1"},ut={class:"py-4 px-4"},pt={class:"text-white"},bt={class:"py-4 px-4"},ft={class:"flex items-center space-x-2"},gt=["onClick"],mt=["onClick"],_t={class:"lg:hidden space-y-4"},yt={class:"flex items-center justify-between mb-3"},ht={class:"flex items-center space-x-3"},vt={class:"text-white font-semibold"},kt={class:"opacity-75 text-xs"},wt={class:"space-y-2 text-sm"},Ct={class:"flex justify-between"},Pt={class:"font-semibold"},zt={class:"flex justify-between"},At={class:"flex justify-between"},Et={key:0,class:"flex justify-between text-green-400"},St={class:"font-semibold"},jt={key:1,class:"flex justify-between text-red-400"},Ht={key:0,class:"mt-3 pt-3 border-t border-white/10"},Nt={class:"flex items-center justify-between bg-black/30 rounded-lg p-2"},$t={class:"text-white font-mono text-xs truncate"},Dt=["onClick"],Vt={class:"flex items-center justify-between mt-4 pt-4 border-t border-white/10"},Bt=["onClick"],Ft={key:0,class:"text-center py-12"},Lt={key:1,class:"flex items-center justify-between mt-6 pt-6 border-t border-blue-500/20"},It={class:"text-blue-300 text-sm"},Kt={class:"flex items-center space-x-2"},Tt=["disabled"],Rt={class:"text-white text-sm"},Mt=["disabled"],Ot={class:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-4"},Ut={class:"bg-gradient-to-br from-blue-600/40 to-cyan-600/40 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-4 shadow-2xl shadow-blue-500/20"},qt={class:"text-center"},Gt={class:"text-2xl font-bold text-white"},Jt={class:"bg-gradient-to-br from-green-600/40 to-emerald-600/40 backdrop-blur-xl border border-green-500/30 rounded-2xl p-4 shadow-2xl shadow-green-500/20"},Qt={class:"text-center"},Wt={class:"text-2xl font-bold text-white"},Xt={class:"bg-gradient-to-br from-purple-600/40 to-pink-600/40 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-4 shadow-2xl shadow-purple-500/20"},Yt={class:"text-center"},Zt={class:"text-2xl font-bold text-white"},te={class:"bg-gradient-to-br from-orange-600/40 to-yellow-600/40 backdrop-blur-xl border border-orange-500/30 rounded-2xl p-4 shadow-2xl shadow-orange-500/20"},ee={class:"text-center"},se={class:"text-2xl font-bold text-white"},oe={__name:"History",props:{purchases:Object},setup(d){const x=d,N=m(()=>x.purchases.data.filter(a=>a.is_active).length),$=m(()=>x.purchases.data.filter(a=>a.status==="pending").length),D=m(()=>x.purchases.data.filter(a=>a.is_expired).length),V=a=>{switch(a){case"certification":return"bg-gradient-to-br from-blue-600/40 to-cyan-600/40 border-blue-500/30";case"access_code":return"bg-gradient-to-br from-green-600/40 to-emerald-600/40 border-green-500/30";case"verification":return"bg-gradient-to-br from-purple-600/40 to-pink-600/40 border-purple-500/30";default:return"bg-gradient-to-br from-slate-600/40 to-slate-700/40 border-slate-500/30"}},y=a=>{switch(a){case"certification":return j;case"access_code":return G;case"verification":return q;default:return A}},B=a=>{switch(a){case"certification":return"text-blue-400";case"access_code":return"text-green-400";case"verification":return"text-purple-400";default:return"text-slate-400"}},h=a=>a.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()),v=a=>{switch(a){case"active":return"bg-green-500/20 text-green-400";case"pending":return"bg-yellow-500/20 text-yellow-400";case"expired":return"bg-red-500/20 text-red-400";case"cancelled":return"bg-gray-500/20 text-gray-400";default:return"bg-blue-500/20 text-blue-400"}},k=a=>{const e=a.codes.certification||a.codes.access||a.codes.verification;e&&navigator.clipboard.writeText(e).then(()=>alert("Code copied to clipboard!")).catch(s=>{console.error("Failed to copy:",s),alert("Failed to copy code to clipboard.")})},w=async a=>{if(confirm("Are you sure you want to activate this package?"))try{await f.post(`/certification/${a}/activate`,{},{preserveScroll:!0,onSuccess:e=>{const s=e?.props?.flash||{};s.success&&(alert(s.success),f.reload())},onError:e=>{console.error("Error activating package:",e),alert("Failed to activate package.")}})}catch(e){console.error("Error activating package:",e),alert("An unexpected error occurred.")}},F=()=>{x.purchases.prev_page_url&&f.visit(x.purchases.prev_page_url)},L=()=>{x.purchases.next_page_url&&f.visit(x.purchases.next_page_url)};return(a,e)=>(r(),_(K,{title:"Certification - History"},{default:u(()=>[t("div",J,[i(l(R),{size:16,class:"text-blue-400"}),e[0]||(e[0]=t("span",null,"Certification",-1)),e[1]||(e[1]=t("span",{class:"text-blue-400"},"â€º",-1)),e[2]||(e[2]=t("span",{class:"text-blue-300"},"Purchase History",-1))]),t("div",Q,[t("div",W,[t("div",X,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold text-white"},"Certification Purchase History",-1)),i(l(p),{href:"/certification",class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white font-bold py-2 px-4 rounded-xl transition-all duration-200 shadow-lg shadow-blue-500/50"},{default:u(()=>e[3]||(e[3]=[I(" Back to Packages ")])),_:1})]),t("div",Y,[t("div",Z,[t("table",tt,[e[5]||(e[5]=t("thead",null,[t("tr",{class:"border-b border-blue-500/20"},[t("th",{class:"text-left py-3 px-4 text-blue-300 text-sm font-semibold"},"Package"),t("th",{class:"text-left py-3 px-4 text-blue-300 text-sm font-semibold"},"Amount"),t("th",{class:"text-left py-3 px-4 text-blue-300 text-sm font-semibold"},"Purchase Date"),t("th",{class:"text-left py-3 px-4 text-blue-300 text-sm font-semibold"},"Status"),t("th",{class:"text-left py-3 px-4 text-blue-300 text-sm font-semibold"},"Expires"),t("th",{class:"text-left py-3 px-4 text-blue-300 text-sm font-semibold"},"Actions")])],-1)),t("tbody",null,[(r(!0),n(C,null,P(d.purchases.data,s=>(r(),n("tr",{key:s.id,class:"border-b border-blue-500/10 hover:bg-blue-500/5 transition-colors"},[t("td",et,[t("div",st,[(r(),_(z(y(s.package_type)),{size:20,class:b(B(s.package_type))},null,8,["class"])),t("div",null,[t("p",ot,o(s.package_name),1),t("p",at,o(h(s.package_type)),1)])])]),t("td",rt,[t("p",it,"KES "+o(s.amount.toLocaleString()),1)]),t("td",lt,[t("p",nt,o(s.created_at),1)]),t("td",dt,[t("span",{class:b([v(s.status),"px-3 py-1 rounded-full text-xs font-semibold"])},o(s.status),3),s.is_active?(r(),n("p",ct,o(s.days_remaining)+" days remaining ",1)):c("",!0),s.is_expired?(r(),n("p",xt," Expired ")):c("",!0)]),t("td",ut,[t("p",pt,o(s.expires_at||"N/A"),1)]),t("td",bt,[t("div",ft,[i(l(p),{href:"/certification/"+s.id,class:"text-blue-400 hover:text-blue-300 transition-colors p-2 hover:bg-blue-500/10 rounded-lg",title:"View Details"},{default:u(()=>[i(l(E),{size:16})]),_:2},1032,["href"]),s.status==="pending"?(r(),n("button",{key:0,onClick:g=>w(s.id),class:"text-green-400 hover:text-green-300 transition-colors p-2 hover:bg-green-500/10 rounded-lg",title:"Activate Package"},[i(l(H),{size:16})],8,gt)):c("",!0),s.codes.certification||s.codes.access||s.codes.verification?(r(),n("button",{key:1,onClick:g=>k(s),class:"text-purple-400 hover:text-purple-300 transition-colors p-2 hover:bg-purple-500/10 rounded-lg",title:"Copy Code"},[i(l(S),{size:16})],8,mt)):c("",!0)])])]))),128))])])]),t("div",_t,[(r(!0),n(C,null,P(d.purchases.data,s=>(r(),n("div",{key:s.id,class:b([V(s.package_type),"border rounded-xl p-4"])},[t("div",yt,[t("div",ht,[(r(),_(z(y(s.package_type)),{size:20})),t("div",null,[t("p",vt,o(s.package_name),1),t("p",kt,o(h(s.package_type)),1)])]),t("span",{class:b([v(s.status),"px-3 py-1 rounded-full text-xs font-semibold"])},o(s.status),3)]),t("div",wt,[t("div",Ct,[e[6]||(e[6]=t("span",{class:"opacity-75"},"Amount:",-1)),t("span",Pt,"KES "+o(s.amount.toLocaleString()),1)]),t("div",zt,[e[7]||(e[7]=t("span",{class:"opacity-75"},"Purchased:",-1)),t("span",null,o(s.created_at),1)]),t("div",At,[e[8]||(e[8]=t("span",{class:"opacity-75"},"Expires:",-1)),t("span",null,o(s.expires_at||"N/A"),1)]),s.is_active?(r(),n("div",Et,[e[9]||(e[9]=t("span",null,"Days Remaining:",-1)),t("span",St,o(s.days_remaining)+" days",1)])):c("",!0),s.is_expired?(r(),n("div",jt,e[10]||(e[10]=[t("span",null,"Status:",-1),t("span",{class:"font-semibold"},"Expired",-1)]))):c("",!0)]),s.codes.certification||s.codes.access||s.codes.verification?(r(),n("div",Ht,[e[11]||(e[11]=t("p",{class:"text-xs opacity-75 mb-1"},"Package Code:",-1)),t("div",Nt,[t("code",$t,o(s.codes.certification||s.codes.access||s.codes.verification),1),t("button",{onClick:g=>k(s),class:"text-purple-400 hover:text-purple-300 ml-2"},[i(l(S),{size:14})],8,Dt)])])):c("",!0),t("div",Vt,[i(l(p),{href:"/certification/"+s.id,class:"text-blue-400 hover:text-blue-300 text-sm flex items-center space-x-1"},{default:u(()=>[i(l(E),{size:14}),e[12]||(e[12]=t("span",null,"Details",-1))]),_:2},1032,["href"]),s.status==="pending"?(r(),n("button",{key:0,onClick:g=>w(s.id),class:"text-green-400 hover:text-green-300 text-sm flex items-center space-x-1"},[i(l(H),{size:14}),e[13]||(e[13]=t("span",null,"Activate",-1))],8,Bt)):c("",!0)])],2))),128))]),d.purchases.data.length===0?(r(),n("div",Ft,[i(l(A),{size:64,class:"mx-auto text-blue-400 mb-4 opacity-50"}),e[15]||(e[15]=t("p",{class:"text-blue-300 text-lg mb-2"},"No certification purchases yet",-1)),e[16]||(e[16]=t("p",{class:"text-blue-400 text-sm mb-6"},"Purchase your first certification package to get started",-1)),i(l(p),{href:"/certification",class:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white font-bold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg shadow-blue-500/50 inline-flex items-center space-x-2"},{default:u(()=>[i(l(j),{size:18}),e[14]||(e[14]=t("span",null,"View Packages",-1))]),_:1})])):c("",!0),d.purchases.total>0?(r(),n("div",Lt,[t("p",It," Showing "+o(d.purchases.from)+" to "+o(d.purchases.to)+" of "+o(d.purchases.total)+" purchases ",1),t("div",Kt,[t("button",{onClick:F,disabled:!d.purchases.prev_page_url,class:"bg-black/30 border border-blue-500/30 text-white px-3 py-2 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:border-blue-500 transition-colors"},[i(l(O),{size:16})],8,Tt),t("span",Rt," Page "+o(d.purchases.current_page)+" of "+o(d.purchases.last_page),1),t("button",{onClick:L,disabled:!d.purchases.next_page_url,class:"bg-black/30 border border-blue-500/30 text-white px-3 py-2 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:border-blue-500 transition-colors"},[i(l(U),{size:16})],8,Mt)])])):c("",!0)]),t("div",Ot,[t("div",Ut,[t("div",qt,[e[17]||(e[17]=t("p",{class:"text-blue-300 text-sm mb-1"},"Total Purchases",-1)),t("p",Gt,o(d.purchases.total),1)])]),t("div",Jt,[t("div",Qt,[e[18]||(e[18]=t("p",{class:"text-green-300 text-sm mb-1"},"Active Packages",-1)),t("p",Wt,o(N.value),1)])]),t("div",Xt,[t("div",Yt,[e[19]||(e[19]=t("p",{class:"text-purple-300 text-sm mb-1"},"Pending Activation",-1)),t("p",Zt,o($.value),1)])]),t("div",te,[t("div",ee,[e[20]||(e[20]=t("p",{class:"text-orange-300 text-sm mb-1"},"Expired",-1)),t("p",se,o(D.value),1)])])])])])]),_:1}))}},ge=T(oe,[["__scopeId","data-v-35fcf3f9"]]);export{ge as default};
